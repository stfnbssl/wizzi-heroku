(self.webpackChunkwizzi_editor=self.webpackChunkwizzi_editor||[]).push([[5229],{13085:(e,t,n)=>{"use strict";n.r(t),n.d(t,{EditorView:()=>Ui,default:()=>Hi});var r=n(54170),o=n(67294),i=n(88699);const a=e=>(e%2==0?2:3)+"px",l=e=>{const{dragging:t,pixelSize:n,color:r="silver",hoverColor:i="gray",dragColor:l="black"}=e,c={"--default-splitter-line-margin":(s=n,`${Math.max(0,Math.floor(s/2)-1)}px`),"--default-splitter-line-size":a(n),"--default-splitter-line-color":t?l:r,"--default-splitter-line-hover-color":t?l:i};var s;return o.createElement("div",{className:"default-splitter",style:c},o.createElement("div",{className:"line"}))};function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}const s=e=>{const{horizontal:t=!1,initialPrimarySize:n="50%",minPrimarySize:r="0px",minSecondarySize:a="0px",splitterSize:s="7px",renderSplitter:u,resetOnDoubleClick:p=!1,defaultSplitterColors:d={color:"silver",hover:"gray",drag:"black"},onSplitChanged:f,onMeasuredSizesChanged:h}=e,[m,b]=o.useState({height:0,width:0}),[y,g]=o.useState({height:0,width:0}),[v,w]=o.useState({height:0,width:0}),x=o.useMemo((()=>t?m.height:m.width),[t,m]),E=o.useMemo((()=>t?y.height:y.width),[t,y]),_=o.useMemo((()=>t?v.height:v.width),[t,v]),[O,C]=o.useState(void 0),[P,S]=o.useState(0),[k,j]=o.useState(0),[R,L]=o.useState(!1);o.useEffect((()=>{f&&f(void 0!==O?`${O}%`:n)}),[O,n]),o.useEffect((()=>{h&&h({primary:E,splitter:_,secondary:x-(E+_)})}),[t,x,E,_]);const D=e=>{e.bounds&&g({height:e.bounds.height,width:e.bounds.width})},N=e=>{e.bounds&&w({height:e.bounds.height,width:e.bounds.width})},T=e=>{e.currentTarget.setPointerCapture(e.pointerId),S(t?e.clientY:e.clientX),j(E),L(!0)},M=e=>{if(e.currentTarget.hasPointerCapture(e.pointerId)){const n=t?e.clientY:e.clientX,r=k+(n-P),o=Math.max(0,Math.min(r,x));C(o/x*100)}},z=e=>{e.currentTarget.releasePointerCapture(e.pointerId),L(!1)},I=()=>{p&&C(void 0)},F=o.Children.toArray(e.children),B=F.length>0?F[0]:o.createElement("div",null),W=F.length>1?F[1]:o.createElement("div",null),A={primary:void 0!==O?`${O}%`:n,minPrimary:r??"0px",minSecondary:a??"0px"},Z={pixelSize:_,horizontal:t,dragging:R},U=u??(()=>o.createElement(l,c({},Z,{color:R?d.drag:d.color,hoverColor:R?d.drag:d.hover}))),H=t?"split-container horizontal":"split-container vertical",V={"--react-split-min-primary":A.minPrimary,"--react-split-min-secondary":A.minSecondary,"--react-split-primary":A.primary,"--react-split-splitter":s};return o.createElement(i.Z,{bounds:!0,onResize:e=>{e.bounds&&b({height:e.bounds.height,width:e.bounds.width})}},(({measureRef:e})=>o.createElement("div",{className:"react-split",ref:e},o.createElement("div",{className:H,style:V},o.createElement("div",{className:"primary"},o.createElement(i.Z,{bounds:!0,onResize:D},(({measureRef:e})=>o.createElement("div",{className:"full-content",ref:e},B)))),o.createElement("div",{className:"splitter",tabIndex:-1,onPointerDown:T,onPointerUp:z,onPointerMove:M,onDoubleClick:I},o.createElement(i.Z,{bounds:!0,onResize:N},(({measureRef:e})=>o.createElement("div",{className:"full-content",ref:e},U(Z))))),o.createElement("div",{className:"secondary"},o.createElement("div",{className:"full-content"},W))))))};function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?f(e):t}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const m={C:67,D:68,F:70,S:83,U:85,V:86,F2:113,Delete:8,Enter:13,Escape:27,Shift:16,Ctrl:17,Alt:18,Cmd:91,Tilde:192,Backslash:220,Meta:"navigator"in n.g&&/Mac/i.test(navigator.platform)?91:17},b=(e,t)=>t.every((t=>{switch(t){case m.Ctrl:return e.ctrlKey;case m.Meta:return e.metaKey;case m.Alt:return e.altKey;default:return e.keyCode===t}})),y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=h(r);if(o){var n=h(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return d(this,e)});function a(...e){var t,n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),o=e=>{const{bindings:n,onTrigger:r}=t.props;for(const t in n)if(n.hasOwnProperty(t)){const o=n[t];if(b(e,o.combo)){e.preventDefault(),r(t,o);break}}},(r="_handleKeydown")in(n=f(t=i.call(this,...e)))?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,t}return t=a,(n=[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this._handleKeydown)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this._handleKeydown)}},{key:"render",value:function(){return null}}])&&u(t.prototype,n),a}(o.PureComponent);var g=n(94184),v=n.n(g),w=n(70894),x=n.n(w),E=n(79732);const _="navigator"in n.g&&/Mac/i.test(navigator.platform),O={Cmd:"⌘",Delete:"⌫",Enter:"↩",Shift:"⇧",Ctrl:_?"⌃":"Ctrl",Alt:_?"⌥":"Alt",Backslash:"\\",Tilde:"`"},C=function({combo:e,className:t,boxed:n=!1}){return o.createElement("kbd",{className:v()((0,r.css)(P.shortcutLabel),n&&(0,r.css)(P.boxedShortcut),t)},e.map((e=>{const t=x()(m,(t=>t===e));return t&&O[t]?O[t]:t})).join(_?"":"+"))},P=r.StyleSheet.create({shortcutLabel:{color:"inherit",fontFamily:"var(--font-monospace)",fontSize:"90%",opacity:.5,boxShadow:"none",display:"inline-block",lineHeight:"initial"},boxedShortcut:{padding:"0.2rem 0.4rem",border:"1px solid ".concat((0,E.c)("border")),borderBottomWidth:2,borderRadius:3,opacity:.66}});function S(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function R(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function L(e){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const D={save:{description:"Save changes",combo:[m.Meta,m.S]},update:{type:"update",description:"Update code on device",combo:[m.Meta,m.U]},tree:{description:"Toggle sidebar",combo:[m.Meta,m.Backslash]},panels:{description:"Toggle error and log panels",combo:[m.Ctrl,m.Tilde]},format:{description:"Format code with prettier",combo:[m.Ctrl,m.Alt,m.F]},shortcuts:{description:"Show keyboard shortcuts",combo:[m.Meta,m.Alt,m.Shift]}},N=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(c,e);var t,n,i,a,l=(i=c,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=L(i);if(a){var n=L(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return R(this,e)});function c(){return S(this,c),l.apply(this,arguments)}return t=c,(n=[{key:"render",value:function(){return o.createElement("table",{className:(0,r.css)(T.shortcutList)},o.createElement("tbody",null,Object.entries(D).map((([e,t])=>o.createElement("tr",{key:e},o.createElement("td",{className:(0,r.css)(T.shortcutCell,T.shortcutLabelCell)},o.createElement(C,{boxed:!0,combo:t.combo})),o.createElement("td",{className:(0,r.css)(T.shortcutCell,T.shortcutDescriptionCell)},t.description))))))}}])&&k(t.prototype,n),c}(o.PureComponent),T=r.StyleSheet.create({shortcutList:{fontSize:"1.2em",tableLayout:"fixed"},shortcutCell:{padding:"6px 8px"},shortcutLabelCell:{textAlign:"right",marginRight:8},shortcutDescriptionCell:{textAlign:"left"}});var M=n(8273),z=n(70971);const I=["title","label","responsive","children","small"];function F(){return(F=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}const B=function(e){let{title:t,label:n,responsive:i,children:a,small:l}=e,c=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,I);return o.createElement("button",F({},c,{className:(0,r.css)(W.button,l&&W.small,c.disabled&&W.disabled)}),a,n?o.createElement("span",{className:(0,r.css)(W.label,!a&&W.labelNoIcon,i&&W.responsive)},n):null,o.createElement("span",{className:(0,r.css)(W.phantom)},o.createElement("span",{className:(0,r.css)(W.tooltip)},t)))},W=r.StyleSheet.create({button:{position:"relative",height:40,minWidth:40,margin:"0 8px",display:"flex",alignItems:"center",justifyContent:"center",appearance:"none",backgroundColor:"transparent",color:"inherit",padding:0,outline:0,border:0,borderRadius:2,whiteSpace:"nowrap",textDecoration:"none",fill:(0,E.c)("text"),stroke:(0,E.c)("text"),":active":{opacity:.8},":hover":{cursor:"pointer",backgroundColor:(0,E.c)("hover")}},small:{height:32,minWidth:32,margin:0,padding:"0 8px 0 0",":hover":{backgroundColor:"transparent"}},disabled:{cursor:"not-allowed",pointerEvents:"none",opacity:.3},phantom:{position:"absolute",top:0,left:0,right:0,bottom:0,opacity:0,zIndex:1,":hover":{opacity:1,pointerEvents:"auto"}},tooltip:{position:"absolute",top:"calc(100% + 4px)",left:"50%",transform:"translateX(-50%)",marginLeft:-2.5,borderRadius:2,fontSize:12,padding:"4px 8px",whiteSpace:"nowrap",pointerEvents:"none",boxShadow:(0,E.s)("popover"),backgroundColor:(0,E.c)("content","dark"),color:(0,E.c)("text","dark")},label:{margin:"0 12px",color:(0,E.c)("text")},labelNoIcon:{margin:"0 12px 0 0"},responsive:{"@media (max-width: 960px)":{display:"none"}}}),A=({children:e,className:t,onClick:n})=>o.createElement("div",{className:v()((0,r.css)(Z.loading),t),onClick:n},e),Z=r.StyleSheet.create({loading:{":before":{display:"inline-block",content:'""',borderWidth:2,borderStyle:"solid",borderTopColor:"rgba(255, 255, 255, 0.2)",borderRightColor:"rgba(255, 255, 255, 0.2)",borderBottomColor:"rgba(255, 255, 255, 0.2)",borderLeftColor:"rgba(255, 255, 255, 0.5)",height:16,width:16,borderRadius:"50%",marginLeft:".5em",marginRight:"1em",verticalAlign:-3,animationName:[{from:{transform:"rotate(0deg)"},to:{transform:"rotate(360deg)"}}],animationDuration:"1s",animationIterationCount:"infinite",animationTimingFunction:"linear"}}}),U=function({active:e,icon:t,children:n,onClick:i}){return o.createElement("button",{onClick:i,style:t?{backgroundImage:"url(".concat(t,")")}:void 0,className:(0,r.css)(H.button,n?H.buttonLabel:void 0,e&&H.active)},n)},H=r.StyleSheet.create({button:{position:"relative",border:0,outline:0,margin:0,height:30,padding:"0 16px",appearance:"none",backgroundColor:"transparent",backgroundSize:16,backgroundRepeat:"no-repeat",backgroundPosition:"center right 8px",":active":{backgroundColor:(0,E.c)("hover"),color:(0,E.c)("soft")},":hover":{backgroundColor:(0,E.c)("hover"),color:(0,E.c)("soft")}},buttonLabel:{"@media (min-width: 720px)":{padding:"5px 32px 5px 8px"}},active:{backgroundColor:(0,E.c)("hover"),color:(0,E.c)("soft")}}),V=function({icon:e,label:t,content:n}){const[i,a]=o.useState(!1),l=o.useRef(null);return o.useEffect((()=>{const e=e=>{var t,n;e.target===l.current||null!==(t=l.current)&&void 0!==t&&null!==(n=t.contains)&&void 0!==n&&n.call(t,e.target)||a(!1)};return document.addEventListener("click",e),()=>document.removeEventListener("click",e)}),[]),o.createElement("div",{ref:l,className:(0,r.css)(K.panelContainer)},o.createElement(U,{icon:e,active:i,onClick:()=>a((e=>!e))},t),i?o.createElement("div",{className:(0,r.css)(K.pane)},n):null)},K=r.StyleSheet.create({panelContainer:{position:"relative",display:"flex",alignItems:"center"},pane:{display:"flex",alignItems:"stretch",justifyContent:"flex-end",flexDirection:"column",position:"absolute",right:0,bottom:32,minWidth:160,padding:"8px 0",borderWidth:1,borderRadius:3,borderStyle:"solid",backgroundColor:(0,E.c)("content"),borderColor:(0,E.c)("border"),boxShadow:(0,E.s)("popover"),color:(0,E.c)("text"),zIndex:-1}}),Y=r.StyleSheet.create({container:{display:"flex",alignItems:"center",margin:8,cursor:"pointer",whiteSpace:"nowrap"},switch:{display:"inline-block",verticalAlign:-4,width:36,height:20,borderRadius:12,border:"1px solid ".concat((0,E.c)("border")),backgroundColor:(0,E.c)("background"),":before":{content:'""',display:"inline-block",height:14,width:14,borderRadius:7,margin:2,transition:".2s",transform:"translateX(0)"}},inactive:{":before":{transform:"translateX(0)",backgroundColor:(0,E.c)("soft")}},active:{":before":{transform:"translateX(16px)",backgroundColor:(0,E.c)("primary")}},check:{display:"none"},label:{flex:1,padding:"0 .5em",fontWeight:"normal"}}),J=function(e){return o.createElement("label",{className:v()((0,r.css)(Y.container),e.className)},o.createElement("span",{className:(0,r.css)(Y.label)},e.label),o.createElement("span",{className:(0,r.css)(Y.switch,e.checked?Y.active:Y.inactive)}),o.createElement("input",{type:"checkbox",checked:e.checked,onChange:e.onChange,className:(0,r.css)(Y.check)}))},X=(0,M.dD)((function(e){var t;const{annotations:i,loggedUser:a,fileTreeShown:l,panelsShown:c,sendCodeOnChangeEnabled:s,isLocalWebPreview:u,onToggleTheme:p,onTogglePanels:d,onToggleFileTree:f,onShowShortcuts:h,theme:m,autoGenSingleDoc:b,autoExecJob:y}=e,g=i.filter((e=>e.severity<0)),v=g.length>=1,w=!v&&i.some((e=>e.severity>3)),x=i.filter((e=>2===e.severity)).length;let E;if(v)E=v?"".concat(g[0].message).concat(g.length>1?" (+".concat(g.length-1," more)"):"","\n            "):"";else{const e=i.filter((e=>e.severity>=3));if(e.length){const{message:t,location:n,action:i}=e[0],a=n?"".concat(n.fileName," (").concat(n.startLineNumber,":").concat(n.startColumn,") "):"",l=i?o.createElement("span",{className:(0,r.css)(G.action),onClick:e=>{e.stopPropagation(),i.run()}},i.title):e.length>1?"(+".concat(e.length-1," more)"):"";E=o.createElement("span",null,a,t.split("\n")[0]+" ",l)}}return o.createElement(z.n,{type:v?"loading":w?"error":null},o.createElement("div",{className:(0,r.css)(G.left)},v?o.createElement(A,{className:(0,r.css)(G.loadingText),onClick:()=>d("errors")},E):o.createElement("button",{onClick:()=>d(E?"errors":void 0),className:(0,r.css)(G.statusText,E?w?G.errorTextFatal:G.errorText:G.successText)},null!==(t=E)&&void 0!==t?t:"No errors".concat(x?", ".concat(x," warning").concat(x>1?"s":"","\n                                    "):"","\n                                "))),o.createElement(V,{icon:n(49558),label:o.createElement("span",{className:(0,r.css)(G.buttonLabel)},"Wizzi"),content:o.createElement(o.Fragment,null,o.createElement(J,{checked:b,onChange:()=>e.setPreferences({autoGenSingleDoc:!e.preferences.autoGenSingleDoc}),label:"Auto gen single doc"}),o.createElement(J,{checked:y,onChange:()=>e.setPreferences({autoExecJob:!e.preferences.autoExecJob}),label:"Auto exec job"}))}),o.createElement(V,{icon:n(49558),label:o.createElement("span",{className:(0,r.css)(G.buttonLabel)},"Editor"),content:o.createElement(o.Fragment,null,o.createElement("div",{className:(0,r.css)(G.buttonItem,G.buttonItemEditorPane),onClick:h},o.createElement(B,{small:!0,title:"Show keyboard shortcuts",label:"Shortcuts"}),o.createElement(C,{combo:D.shortcuts.combo,className:(0,r.css)(G.buttonItemShortcut)})),o.createElement("div",{className:(0,r.css)(G.menuSeparator)}),o.createElement(J,{checked:l,onChange:f,label:"Files"}),o.createElement(J,{checked:c,onChange:()=>d(),label:"Panel"}),o.createElement(J,{checked:"light"!==m,onChange:p,label:"Dark theme"}))}))})),G=r.StyleSheet.create({left:{display:"flex",alignItems:"stretch",flex:1,minWidth:0,overflow:"hidden"},loadingText:{textOverflow:"ellipsis",whiteSpace:"nowrap",padding:".5em",width:"100%",cursor:"pointer"},statusText:{border:0,outline:0,margin:0,appearance:"none",backgroundColor:"transparent",backgroundSize:16,backgroundRepeat:"no-repeat",backgroundPosition:"1em center",display:"inline-block",textOverflow:"ellipsis",whiteSpace:"nowrap",padding:".25em .5em .25em 3em",minWidth:200,width:"100%",textAlign:"left"},successText:{backgroundImage:"url(".concat(n(64091),")")},errorText:{backgroundImage:"url(".concat(n(3957),")"),color:(0,E.c)("error")},errorTextFatal:{backgroundImage:"url(".concat(n(50436),")")},errorBorder:{borderColor:(0,E.c)("error-text")},devicesCount:{position:"absolute",top:4,right:6,height:20,minWidth:20,borderRadius:"50%",backgroundColor:(0,E.c)("text"),color:(0,E.c)("background"),opacity:.5},devicePane:{padding:"0 16px"},devicePaneItem:{margin:"0 -16px"},deviceLabel:{display:"flex",alignItems:"center",whiteSpace:"nowrap",padding:"8px 0"},deviceIcon:{height:16,width:16,marginRight:8,fill:"currentColor"},noDevicesMessage:{whiteSpace:"nowrap",margin:8},buttonLabel:{display:"none",["@media (min-width: ".concat(720,"px)")]:{display:"inline"}},buttonItem:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between"},buttonItemShortcut:{userSelect:"none",cursor:"pointer",marginLeft:12},buttonItemEditorPane:{margin:"0 12px"},title:{margin:"16px 0 8px"},action:{textDecoration:"underline",cursor:"pointer",fontWeight:"bold"},menuSeparator:{margin:"6px 0",borderBottom:"1px solid ".concat((0,E.c)("border"))}});var $=n(92742),q=n.n($);const Q=function({annotations:e,onSelectFile:t}){const[n,i]=o.useState(void 0);return o.createElement(o.Fragment,null,e.map((({message:a,location:l,source:c,severity:s,action:u},p)=>{var d;let f=ee.infoIcon,h=ee.infoColor;s>=3?(f=ee.errorIcon,h=ee.errorColor):s>=2?(f=ee.warningIcon,h=ee.warningColor):s<0&&(f=ee.loadingIcon);const m=null!=l&&l.fileName?o.createElement("span",{className:(0,r.css)(ee.location,h),onClick:()=>t(l.fileName)},"".concat(l.fileName," (").concat(l.startLineNumber,":").concat(l.startColumn,")")):"",b=o.createElement("div",{className:(0,r.css)(ee.icon,f)}),y=a.split("\n"),g=y[0];let v;u?v=o.createElement("button",{className:(0,r.css)(ee.action),onClick:u.run},u.icon?o.createElement("span",{className:(0,r.css)(ee.actionIcon)},o.createElement(u.icon,null)):void 0,o.createElement("span",{className:(0,r.css)(ee.actionText)},u.title)):c&&(v=o.createElement("span",{className:(0,r.css)(ee.source)}," (".concat(c,")")));const w="".concat(null!==(d=null==l?void 0:l.fileName)&&void 0!==d?d:"",".").concat(g,".").concat(null!=c?c:""),x=1===e.length||n===w;return o.createElement("div",{key:p,className:(0,r.css)(ee.item),onClick:()=>i(w)},o.createElement("div",{className:(0,r.css)(ee.line)},b,m,g,v),x&&y.length>1?o.createElement("pre",{className:(0,r.css)(ee.callstack)},q()(a.substring(g.length),"\r\n")):void 0)})))},ee=r.StyleSheet.create({item:{display:"flex",flexDirection:"column",padding:"0 1.5em"},line:{display:"flex",flexDirection:"row",alignItems:"center",border:0,margin:0,padding:"1px 0",color:(0,E.c)("text"),minHeight:30},icon:{backgroundSize:16,backgroundRepeat:"no-repeat",backgroundPosition:"center center",width:16,height:16,marginRight:"0.5em"},loadingIcon:{borderWidth:2,borderStyle:"solid",borderTopColor:(0,E.c)("text"),borderLeftColor:(0,E.c)("text"),borderBottomColor:(0,E.c)("text"),borderRightColor:"rgba(0, 0, 0, .16)",opacity:.5,borderRadius:"50%",verticalAlign:-3,animationName:[{from:{transform:"rotate(0deg)"},to:{transform:"rotate(360deg)"}}],animationDuration:"1s",animationIterationCount:"infinite",animationTimingFunction:"linear"},infoIcon:{backgroundImage:"url(".concat(n(93361),")")},errorIcon:{backgroundImage:"url(".concat(n(3957),")")},warningIcon:{backgroundImage:"url(".concat(n(53117),")")},location:{textDecoration:"underline",cursor:"pointer",marginRight:"0.5em"},infoColor:{opacity:.5},errorColor:{color:(0,E.c)("error")},warningColor:{color:(0,E.c)("warning")},source:{color:(0,E.c)("text"),opacity:.5,marginLeft:"0.5em"},action:{display:"flex",flexDirection:"row",alignItems:"center",appearance:"none",outline:0,margin:"0 0 0 0.5em",backgroundColor:(0,E.c)("content"),color:(0,E.c)("selected"),borderRadius:3,border:"1px solid ".concat((0,E.c)("selected")),lineHeight:1,padding:"0 12px",minWidth:50,minHeight:30,":hover":{backgroundColor:(0,E.c)("selected"),color:(0,E.c)("content"),boxShadow:(0,E.s)("small")}},actionIcon:{marginRight:4},actionText:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},callstack:{color:(0,E.c)("error"),fontFamily:"var(--font-monospace)",margin:"0.5em 0px"}});function te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ne(e,t){return(ne=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function re(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?oe(e):t}function oe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ie(e){return(ie=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ae(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let le=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ne(e,t)}(c,e);var t,n,i,a,l=(i=c,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ie(i);if(a){var n=ie(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return re(this,e)});function c(...e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),ae(oe(t=l.call(this,...e)),"state",{resizing:!1,initialPosition:null,initialWidth:0,initialHeight:0}),ae(oe(t),"_handleMouseDown",(e=>{if(!t._pane.current)return;const n=getComputedStyle(t._pane.current);t.setState({resizing:!0,initialPosition:{pageX:e.pageX,pageY:e.pageY},initialWidth:parseFloat(n.width||"0"),initialHeight:parseFloat(n.height||"0")})})),ae(oe(t),"_handleMouseUp",(e=>{t.state.resizing&&(e.preventDefault(),t.setState({resizing:!1,initialPosition:null,initialWidth:0,initialHeight:0}))})),ae(oe(t),"_handleMouseMove",(e=>{const{direction:n,inverted:r}=t.props,{resizing:o,initialPosition:i,initialWidth:a,initialHeight:l}=t.state;if(o&&i){var c,s;let o;if(e.preventDefault(),"horizontal"===n){const t=e.pageX-i.pageX;o="width: ".concat(a+(r?-t:t),"px !important;")}else{const t=i.pageY-e.pageY;o="height: ".concat(l+(r?-t:t),"px !important")}null===(c=t._pane.current)||void 0===c||null===(s=c.setAttribute)||void 0===s||s.call(c,"style",o)}})),ae(oe(t),"_pane",o.createRef()),t}return t=c,(n=[{key:"componentDidMount",value:function(){document.addEventListener("mouseup",this._handleMouseUp),document.addEventListener("mousemove",this._handleMouseMove)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mouseup",this._handleMouseUp),document.removeEventListener("mousemove",this._handleMouseMove)}},{key:"render",value:function(){const{direction:e,inverted:t,className:n,children:i}=this.props;return o.createElement("div",{ref:this._pane,className:"".concat((0,r.css)(ce.container)," ").concat(null!=n?n:"")},i,o.createElement("div",{className:(0,r.css)(ce.handle,"horizontal"===e?ce.horizontal:ce.vertical,"horizontal"===e?t?ce.horizontalInverted:ce.horizontalNormal:t?ce.verticalInverted:ce.verticalNormal),onMouseDown:this._handleMouseDown,onMouseUp:this._handleMouseUp}))}}])&&te(t.prototype,n),c}(o.PureComponent);const ce=r.StyleSheet.create({container:{position:"relative"},handle:{position:"absolute",zIndex:1},horizontal:{top:0,bottom:0,width:12,cursor:"col-resize"},vertical:{left:0,right:0,height:12,cursor:"row-resize"},horizontalNormal:{right:-12},horizontalInverted:{left:-12},verticalNormal:{top:-12},verticalInverted:{bottom:-12}});function se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ue(e,t){return(ue=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function pe(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?de(e):t}function de(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fe(e){return(fe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function he(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let me=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ue(e,t)}(c,e);var t,n,i,a,l=(i=c,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=fe(i);if(a){var n=fe(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return pe(this,e)});function c(...e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),he(de(t=l.call(this,...e)),"_isScrolled",!1),he(de(t),"_panel",o.createRef()),t}return t=c,(n=[{key:"getSnapshotBeforeUpdate",value:function(e){return null}},{key:"componentDidUpdate",value:function(e){}},{key:"render",value:function(){const{annotations:e,onSelectFile:t,onShowErrorPanel:n,onTogglePanels:i,panelType:a}=this.props;return o.createElement(le,{direction:"vertical",className:(0,r.css)(be.container)},o.createElement("div",{className:(0,r.css)(be.panels)},o.createElement("div",{className:(0,r.css)(be.header)},o.createElement("button",{onClick:n,className:(0,r.css)(be.tab,"errors"!==a&&be.inactive)},"Problems"),o.createElement("div",{className:(0,r.css)(be.buttons)},o.createElement("button",{onClick:()=>i(),className:(0,r.css)(be.button,be.close)}))),o.createElement("div",{ref:this._panel,className:(0,r.css)(be.panel)},"errors"===a?o.createElement(Q,{annotations:e,onSelectFile:t}):null)))}}])&&se(t.prototype,n),c}(o.Component);const be=r.StyleSheet.create({container:{height:"14em"},header:{display:"flex",flexDirection:"row",alignItems:"center",paddingTop:".75em"},tab:{display:"inline-block",appearance:"none",background:"none",border:"none",margin:0,padding:".35em 1.5em",fontSize:".9em",textTransform:"uppercase",outline:"none",opacity:1},inactive:{opacity:.5},buttons:{display:"flex",flex:1,flexDirection:"row",justifyContent:"flex-end",margin:"0 1em"},button:{height:24,width:24,border:0,outline:0,margin:"0 .5em",appearance:"none",backgroundColor:"transparent",backgroundSize:16,backgroundRepeat:"no-repeat",backgroundPosition:"center"},close:{backgroundImage:"url(".concat(n(53117),")")},clear:{backgroundImage:"url(".concat(n(55959),")")},panels:{backgroundColor:(0,E.c)("content"),borderColor:(0,E.c)("border"),borderWidth:"1px 0 0 0",borderStyle:"solid",height:"100%",minHeight:0},panel:{display:"flex",flexDirection:"column",minHeight:0,padding:".5em 0 .75em 0",overflow:"auto",height:"calc(100% - 2.5em)"}}),ye=["height","width","theme"];function ge(){return(ge=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}const ve=e=>{let{height:t="24px",width:n="24px",theme:r="light"}=e,i=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,ye);const a="light"==r?"#000000":"#ffffff";return o.createElement("svg",ge({xmlns:"http://www.w3.org/2000/svg",width:n,height:t,viewBox:"0 0 660 280"},i),o.createElement("polyline",{fill:a,stroke:a,points:"10 250 45 10 60 10 75 130 120 210 120 130 175 210 175 110 230 210 230 250"}),o.createElement("polyline",{fill:a,stroke:a,points:"250 250 260 90 290 90 300 250"}),o.createElement("polyline",{fill:a,stroke:a,points:"320 250 320 230 420 130 400 110 400 90 450 90 420 230 440 230 440 250"}),o.createElement("polyline",{fill:a,stroke:a,points:"450 250 450 230 550 130 530 110 530 90 580 90 550 230 570 230 570 250"}),o.createElement("polyline",{fill:a,stroke:a,points:"590 250 600 90 630 90 640 250"}),o.createElement("path",{fill:a,stroke:a,d:"M280, 30 C310,50 250,70 280, 84"}),o.createElement("path",{fill:a,stroke:a,d:"M620, 30 C650,50 590,70 620, 84"}))},we=["height","width","theme"];function xe(){return(xe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}const Ee=e=>{let{height:t="24px",width:n="24px",theme:r="light"}=e,i=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,we);const a="light"==r?"#000000":"#ffffff";return o.createElement("svg",xe({xmlns:"http://www.w3.org/2000/svg",width:n,height:t,viewBox:"0 0 512 512"},i),o.createElement("g",null,o.createElement("path",{fill:a,stroke:a,d:"M486.805,34.87c-2.81-10.483-9.533-19.245-18.931-24.671l-8.206-4.738c-9.397-5.426-20.348-6.867-30.831-4.059c-10.484,2.81-19.246,9.533-24.672,18.932L174.185,418.667c-0.832,1.442-1.301,3.041-1.414,4.672c-0.003,0.035-0.016,0.062-0.018,0.098l-4.014,66.894H94.584c-5.983,0-10.835,4.852-10.835,10.835s4.852,10.835,10.835,10.835c0,0,85.393-0.032,85.656-0.093c1.639-0.198,3.243-0.755,4.673-1.7l64.441-42.548c0.035-0.023,0.053-0.056,0.086-0.08c1.322-0.892,2.478-2.071,3.328-3.544L482.746,65.702C488.172,56.303,489.614,45.354,486.805,34.87z M191.058,480.183l2.278-37.95l29.45,17.002L191.058,480.183z M239.418,443.817l-41.049-23.698l177.532-307.493l41.047,23.698L239.418,443.817zM427.784,117.558l-41.047-23.698l17.419-30.172l41.047,23.698L427.784,117.558z M463.978,54.867l-7.94,13.751L414.991,44.92l7.939-13.751c2.533-4.387,6.622-7.524,11.514-8.835c4.896-1.311,10.002-0.638,14.387,1.894l8.206,4.738c4.387,2.532,7.524,6.621,8.835,11.513C467.183,45.372,466.51,50.481,463.978,54.867z"}),o.createElement("path",{fill:a,stroke:a,d:"M41.853,490.331h-7.224c-5.983,0-10.835,4.852-10.835,10.835c0,5.983,4.852,10.835,10.835,10.835h7.224c5.983,0,10.835-4.852,10.835-10.835C52.688,495.183,47.836,490.331,41.853,490.331z"})))},_e=["height","width","theme"];function Oe(){return(Oe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}const Ce=e=>{let{height:t="24px",width:n="24px",theme:r="light"}=e,i=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,_e);return o.createElement("svg",Oe({xmlns:"http://www.w3.org/2000/svg",width:n,height:t,viewBox:"0 0 1000 1000"},i),o.createElement("g",null,o.createElement("g",{transform:"translate(0.000000,511.000000) scale(0.100000,-0.100000)"},o.createElement("path",{d:"M4637.4,4936.3c-1720.2-88.1-3306.1-1110.1-4063.8-2618.9c-218-433.9-345.8-828.2-433.9-1332.6c-52.9-306.2-52.9-1057.3,0-1365.6c174-1004.4,621.1-1856.8,1350.2-2568.3c784.1-762.1,1812.7-1242.3,2920.6-1361.2c259.9-28.6,832.6-30.8,832.6-4.4c0,17.6-74.9,398.7-99.1,500c-8.8,44.1-26.4,46.3-389.9,59.5c-612.3,22-1160.8,158.6-1733.4,436.1l-275.3,132.2l77.1,37.4c105.7,52.9,105.7,116.8,0,400.9c-107.9,288.6-114.5,370-28.7,462.5c44.1,48.5,103.5,77.1,235.7,110.1c231.3,61.7,363.4,134.4,544,306.1c105.7,96.9,171.8,185,226.9,293c118.9,237.9,101.3,326-66.1,326c-279.7,0-579.3,152-892.1,453.7C2714.5-673.8,2575.7-557,2536.1-535c-174,88.1-614.5,57.3-770.9-55.1c-112.3-81.5-328.2-409.7-480.2-724.6L1161.7-1568l-70.5,140.9C948-1140.7,800.4-684.8,738.8-325.8l-13.2,77.1l215.9,105.7C1423.8,95,1851.1,350.4,1954.6,462.8c83.7,90.3,66.1,149.8-92.5,301.8l-143.2,136.6l2.2,306.2c0,167.4,8.8,385.4,17.6,480.2c13.2,165.2,19.8,178.4,96.9,244.5c44,39.6,204.9,123.3,356.8,185c555.1,233.5,654.2,370,539.6,729.1c-48.5,154.2-218,471.4-323.8,612.3c-66.1,85.9-77.1,70.5,215.9,255.5C3130.8,4033.2,3688.1,4238,4307,4335c301.8,46.3,887.6,52.9,1180.6,11l211.4-28.6l37.5-185c81.5-418.5,237.9-786.3,385.4-914.1c44.1-37.4,169.6-125.5,277.5-193.8c110.1-70.5,365.6-257.7,570.5-416.3c202.6-158.6,411.9-317.2,462.5-348c52.9-33,116.7-92.5,143.2-130c127.7-189.4,279.7-676.2,304-982.4c17.6-229.1-22-334.8-226.9-603.5c-209.2-279.7-262.1-361.2-237.9-383.3c33-30.8,2099.1-1257.7,2127.7-1262.1c30.8-8.8,92.5,182.8,160.8,502.2c176.2,810.5,105.7,1702.6-196,2488.9c-497.8,1306.1-1599.1,2343.6-2977.9,2801.7C5932.5,4892.2,5326.8,4969.3,4637.4,4936.3z M8826.7,1971.6c143.2-304,257.7-658.6,319.4-991.2c39.6-215.8,48.5-330.4,46.3-678.4c-2.2-229.1-11-453.8-22-495.6l-19.8-74.9l-50.7,141c-103.5,290.8-259.9,508.8-513.2,718.1c-204.8,169.6-275.3,273.1-354.6,511c-116.7,352.4-116.7,649.8,2.2,795.1c52.9,63.9,422.9,310.6,467,310.6C8710,2207.2,8767.2,2101.5,8826.7,1971.6z"}),o.createElement("path",{d:"M4780.5,1039.9l-55.1-41.8l561.7-2797.3c308.4-1539.6,566.1-2799.5,572.7-2799.5c6.6,0,253.3,367.8,548.5,815c295.1,449.3,546.2,812.8,555,810.6c8.8-4.4,251.1-332.6,539.6-733.5c286.3-398.7,557.3-764.3,601.3-810.6c312.8-330.4,843.6-251.1,960.3,145.4c81.5,277.5,61.7,323.8-596.9,1240.1c-308.4,431.7-557.3,788.5-552.9,792.9c4.4,4.4,449.3,92.5,986.8,196c537.4,103.5,986.8,189.4,997.8,193.8c11,4.4-127.8,94.7-308.4,200.4c-180.6,107.9-1284.1,766.5-2453.7,1462.5C5967.7,412.1,4972.2,1004.6,4923.7,1031.1C4837.8,1081.7,4835.6,1081.7,4780.5,1039.9z"})),o.createElement("line",{className:"st0",x1:"3",y1:"16",x2:"15",y2:"16"}),o.createElement("path",{className:"st0",d:"M21.8,13c-0.6-5.7-3-10-5.8-10c-3.3,0-6,5.8-6,13s2.7,13,6,13"}),o.createElement("path",{className:"st0",d:"M28.9,17c0-0.3,0.1-0.7,0.1-1c0-7.2-5.8-13-13-13S3,8.8,3,16s5.8,13,13,13c1,0,2-0.1,3-0.4"}),o.createElement("path",{className:"st0",d:"M24.5,17.5c1.9,1.9,1.9,5.1,0,7c-0.5,0.5-1,0.8-1.6,1.1c-1.8,0.7-3.9,0.4-5.4-1.1c-1.9-1.9-1.9-5.1,0-7S22.6,15.6,24.5,17.5z"}),o.createElement("path",{className:"st0",d:"M25.5,23l3.9,3.6c0.8,0.8,0.8,2,0,2.8l0,0c-0.8,0.8-2,0.8-2.8,0l-3.5-3.5"})))};var Pe,Se,ke=n(1565);function je(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}const Re=ke.ZP.div(Pe||(Pe=je(["\n    display: -ms-flexbox;\n    display: -webkit-box;\n    display: -webkit-flex;\n    display: flex;\n    -webkit-box-pack: center;\n    -ms-flex-pack: center;\n    -webkit-justify-content: center;\n    justify-content: center;\n    -webkit-align-items: center;\n    -webkit-box-align: center;\n    -ms-flex-align: center;\n    align-items: center;\n    stroke: ",";\n"])),(e=>(0,E.c)("text"))),Le=ke.ZP.img(Se||(Se=je(["\n    width: ",";\n    height: ",";\n    -webkit-border-radius: ",";\n    -khtml-border-radius: ",";\n    -moz-border-radius: ",";\n    -o-border-radius: ",";\n    border-radius: ",";\n"])),(e=>e.size+"px"),(e=>e.size+"px"),(e=>e.size/2+"px"),(e=>e.size/2+"px"),(e=>e.size/2+"px"),(e=>e.size/2+"px"),(e=>e.size/2+"px")),De=({size:e,source:t})=>o.createElement(Re,null,t?o.createElement(Le,{src:t,size:e}):o.createElement("svg",{width:"20",height:"20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o.createElement("path",{d:"M13.125 13.563c2.423-3.635 2.831-10.938-2.623-10.938-5.454 0-5.05 7.303-2.627 10.938-2.423 0-5.25 2.389-5.25 4.812h15.75c.004-2.423-2.827-4.813-5.25-4.813z",strokeWidth:"1.75",strokeLinecap:"round",strokeLinejoin:"round"})));function Ne(){return(Ne=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Te(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ze(e,t){return(ze=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ie(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Fe(e){return(Fe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}let Be=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ze(e,t)}(c,e);var t,n,i,a,l=(i=c,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Fe(i);if(a){var n=Fe(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Ie(this,e)});function c(){return Te(this,c),l.apply(this,arguments)}return t=c,(n=[{key:"render",value:function(){const{visible:e,position:t,actions:n,onHide:i,className:a,innerRef:l}=this.props;if(!e)return null;const c=n.filter((e=>e));return o.createElement("ul",{ref:l,className:v()((0,r.css)(Ae.menu),a),style:t?{position:"fixed",top:Math.min(t.pageY,window.innerHeight-35-28*c.length),left:t.pageX,marginTop:-8}:{}},c.map((({label:e,handler:t,disabled:n,combo:a})=>o.createElement("li",{key:e},o.createElement("button",{disabled:n,className:(0,r.css)(Ae.item,n&&Ae.disabled),onClick:()=>{t(),i()}},o.createElement("div",null,e),a?o.createElement(C,{combo:a,className:(0,r.css)(Ae.hint)}):null)))))}}])&&Me(t.prototype,n),c}(o.PureComponent);const We=o.forwardRef(((e,t)=>o.createElement(Be,Ne({},e,{innerRef:t})))),Ae=r.StyleSheet.create({menu:{zIndex:10,listStyle:"none",padding:0,borderRadius:4,borderStyle:"solid",boxShadow:(0,E.s)("popover"),minWidth:160,animationName:{from:{opacity:0},to:{opacity:1}},animationDuration:"0.083s",animationTimingfunction:"linear",backgroundColor:(0,E.c)("content"),border:"1px solid ".concat((0,E.c)("border")),color:(0,E.c)("text")},item:{display:"flex",justifyContent:"space-between",appearance:"none",background:"none",border:0,outline:0,width:"100%",padding:"8px 6px",textAlign:"left",userSelect:"none",borderRadius:2,fontSize:16,color:(0,E.c)("text"),borderBottom:"1px solid ".concat((0,E.c)("border")),marginBottom:"-1px",":hover":{background:(0,E.c)("hover")}},disabled:{pointerEvents:"none",opacity:.5},hint:{marginLeft:24,lineHeight:"24px"}});var Ze="/index.js";function Ue(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function He(e,t){return(He=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ve(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?Ke(e):t}function Ke(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ye(e){return(Ye=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Je(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Xe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&He(e,t)}(c,e);var t,n,i,a,l=(i=c,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ye(i);if(a){var n=Ye(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Ve(this,e)});function c(...e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),Je(Ke(t=l.call(this,...e)),"state",{visible:!1}),Je(Ke(t),"_handleDocumentClick",(e=>{console.log("UserMenu _handleDocumentClick",t.state.visible,Ze),t.state.visible?t._menu.current&&e.target!==t._menu.current&&!t._menu.current.contains(e.target)&&t._hideMenu():t._avatar.current&&(e.target===t._avatar.current||t._avatar.current.contains(e.target))&&t.setState((e=>({visible:!e.visible})))})),Je(Ke(t),"_handleDocumentContextMenu",(()=>{t.state.visible&&t._hideMenu()})),Je(Ke(t),"_hideMenu",(()=>t.setState({visible:!1}))),Je(Ke(t),"_menu",o.createRef()),Je(Ke(t),"_avatar",o.createRef()),t}return t=c,(n=[{key:"componentDidMount",value:function(){document.addEventListener("click",this._handleDocumentClick),document.addEventListener("contextmenu",this._handleDocumentContextMenu),console.log("UserMenu componentDidMount",Ze)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this._handleDocumentClick),document.removeEventListener("contextmenu",this._handleDocumentContextMenu)}},{key:"render",value:function(){const{loggedUser:e}=this.props;return o.createElement("div",{className:(0,r.css)(Ge.container)},o.createElement("button",{ref:this._avatar,className:(0,r.css)(Ge.button),title:"Your profile"},o.createElement(De,{source:null!=e&&e.picture?e.picture:null,size:26})),o.createElement(We,{ref:this._menu,visible:this.state.visible,actions:e?[{label:"Artifacts",handler:()=>window.open("".concat("http://localhost:5000","/productions/artifacts"))},{label:"Packages",handler:()=>window.open("".concat("http://localhost:5000","/productions/packages"))},{label:"Metas",handler:()=>window.open("".concat("http://localhost:5000","/productions/metas"))},{label:"tFolders",handler:()=>window.open("".concat("http://localhost:5000","/productions/tfolders"))},{label:"Settings",handler:()=>window.open("".concat("http://localhost:5000","/settings"))}]:[{label:"Log in to Wizzi",handler:()=>window.location.href="#"}],onHide:this._hideMenu,className:(0,r.css)(Ge.menu)}))}}])&&Ue(t.prototype,n),c}(o.Component),Ge=r.StyleSheet.create({container:{marginRight:16},menu:{position:"absolute",margin:"4px 0",right:16},button:{appearance:"none",background:"transparent",padding:0,margin:0,border:0,outline:0,height:40,width:40,borderRadius:2,textDecoration:"none",display:"flex",justifyContent:"center",alignItems:"center",":hover":{backgroundColor:(0,E.c)("hover")}}});var $e="/index.js";function qe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Qe(e,t){return(Qe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function et(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?tt(e):t}function tt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nt(e){return(nt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function rt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const ot=o.createContext(void 0);let it=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qe(e,t)}(l,e);var t,n,r,i,a=(r=l,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=nt(r);if(i){var n=nt(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return et(this,e)});function l(...e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),rt(tt(t=a.call(this,...e)),"state",{isValid:!1}),rt(tt(t),"_key",0),rt(tt(t),"_inputs",[]),rt(tt(t),"_register",(({validate:e,focus:n})=>{const r=t._key++;return t._inputs.push({key:r,validate:e,focus:n}),r})),rt(tt(t),"_unregister",(e=>t._inputs=t._inputs.filter((t=>t.key!==e)))),rt(tt(t),"_update",(()=>t.setState({isValid:t._inputs.every((e=>!e.validate()))}))),rt(tt(t),"_handleSubmit",(e=>{e.preventDefault(),console.log("features.form._handleSubmit",$e);for(const e of t._inputs)if(console.log("features.form._handleSubmit.input.validate()",e.validate(),$e),e.validate())return void e.focus();console.log("features.form._handleSubmit.onSubmit()",$e),t.props.onSubmit()})),t}return t=l,(n=[{key:"componentDidMount",value:function(){this._update()}},{key:"render",value:function(){return o.createElement(ot.Provider,{value:{register:this._register,unregister:this._unregister,update:this._update,valid:this.state.isValid}},o.createElement("form",{onSubmit:this._handleSubmit},this.props.children))}}])&&qe(t.prototype,n),l}(o.Component);var at=n(87623),lt=n(5565),ct=n(41072),st=n(46479),ut=n(22318),pt=n(33758);function dt(){return(dt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ft(e){function t(t){return o.createElement(ot.Consumer,null,((n={valid:!0})=>o.createElement(e,dt({disabled:!n.valid},t))))}return t.displayName="withValidation(".concat(e.displayName||e.name,")"),t}const ht=["helperText"];function mt(){return(mt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function bt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yt(e,t){return(yt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function gt(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?vt(e):t}function vt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wt(e){return(wt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Et(e){var t;let n=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yt(e,t)}(s,t);var n,r,i,a,l,c=(a=s,l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=wt(a);if(l){var n=wt(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return gt(this,e)});function s(...e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),xt(vt(t=c.call(this,...e)),"state",{initial:!0,error:null,value:t.props.value}),xt(vt(t),"_key",0),xt(vt(t),"_root",o.createRef()),xt(vt(t),"_validate",(()=>t.props.validate(t.props.value))),xt(vt(t),"_focus",(()=>{var e,n;null===(e=t._root.current)||void 0===e||null===(n=e.focus)||void 0===n||n.call(e),t.state.initial&&t.setState({initial:!1,error:t.props.validate(t.props.value)})})),t}return n=s,i=[{key:"getDerivedStateFromProps",value:function(e,t){const n=t.value===e.value&&t.initial;return{initial:n,error:n?null:e.validate?e.validate(e.value):null,value:e.value}}}],(r=[{key:"componentDidMount",value:function(){this._key=this.props.validation.register({validate:this._validate,focus:this._focus})}},{key:"componentDidUpdate",value:function(e){e.value!==this.props.value&&this.props.validation.update()}},{key:"componentWillUnmount",value:function(){this.props.validation.unregister(this._key)}},{key:"render",value:function(){const t=this.props,{helperText:n}=t,r=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(t,ht);return o.createElement(e,mt({ref:this._root,error:this.state.error,helperText:this.state.error?this.state.error.message:n},r))}}])&&bt(n.prototype,r),i&&bt(n,i),s}(o.Component);return xt(n,"displayName","withValidation(".concat(null!==(t=e.displayName)&&void 0!==t?t:e.name,")")),e=>o.createElement(ot.Consumer,null,(t=>o.createElement(n,mt({validation:t},e))))}function _t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ot(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_t(Object(n),!0).forEach((function(t){Rt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_t(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ct(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Pt(e,t){return(Pt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function St(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?kt(e):t}function kt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jt(e){return(jt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Rt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Lt(e){return null}function Dt(e){const t={};return Object.keys(e).map((n=>t[n]=e[n].default)),t}const Nt=ft(pt.Z),Tt=Et(ct.Z);let Mt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pt(e,t)}(s,e);var t,n,i,a,l,c=(a=s,l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=jt(a);if(l){var n=jt(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return St(this,e)});function s(...e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),Rt(kt(t=c.call(this,...e)),"state",{visible:t.props.visible,values:Dt(t.props.fields)}),Rt(kt(t),"_handleSubmit",(()=>t.props.onSubmit(t.state.values))),t}return t=s,i=[{key:"getDerivedStateFromProps",value:function(e,t){return t.visible!==e.visible?e.visible?{visible:e.visible,values:Dt(e.fields)}:{visible:e.visible}:null}}],(n=[{key:"render",value:function(){const{classes:e,visible:t,title:n,action:i,fields:a,theme:l,className:c,onDismiss:s}=this.props;return t?o.createElement("div",{className:e.container},o.createElement("div",{className:v()((0,r.css)(zt.modal,"dark"===l?zt.contentDark:zt.contentLight),c)},o.createElement("div",{className:e.title},o.createElement(ut.Z,{variant:"h6"},n)),o.createElement(it,{onSubmit:this._handleSubmit},Object.keys(a).map(((t,n)=>{const r=a[t],i=this.state.values[t];return["text","checkbox"].indexOf(r.type)>-1?o.createElement("div",{key:n,className:e.fieldContainer},o.createElement(Tt,{autoFocus:!0,type:r.type,className:e.textField,margin:"normal",label:r.label,value:i,onChange:e=>this.setState({values:Ot(Ot({},this.state.values),{},{[t]:e.target.value})}),placeholder:r.label,validate:r.onValidate||Lt})):"select"===r.type?o.createElement("div",{key:n,className:e.fieldContainer},o.createElement(Tt,{select:!0,className:e.textField,label:r.label,SelectProps:{MenuProps:{className:e.menu}},helperText:r.helperText,margin:"normal",value:i,onChange:e=>this.setState({values:Ot(Ot({},this.state.values),{},{[t]:e.target.value})}),placeholder:r.label,validate:r.onValidate||Lt},r.options&&r.options.map((e=>o.createElement(st.Z,{key:e.value,value:e.value},e.label))))):null})),o.createElement("div",{className:(0,r.css)(zt.buttons)},o.createElement("div",{className:e.button},o.createElement(Nt,{type:"submit",color:"primary",variant:"extended"},i)),o.createElement("div",{className:e.button},o.createElement(pt.Z,{type:"button",color:"secondary",variant:"extended",onClick:s},"Cancel")))))):null}}])&&Ct(t.prototype,n),i&&Ct(t,i),s}(o.Component);const zt=r.StyleSheet.create({title:{height:72,fontSize:24,width:"100%",lineHeight:"24px",display:"flex",flexShrink:0,alignItems:"center",justifyContent:"center",boxShadow:"0 1px 0 rgba(36, 44, 58, 0.1)"},subtitle:{fontSize:16,fontWeight:500,padding:0,lineHeight:"22px",margin:"16px 0 6px 0"},buttons:{margin:"20px 0 0 0",display:"flex",justifyContent:"space-around"},caption:{marginTop:24,fontSize:"16px",lineHeight:"22px",textAlign:"center"},link:{cursor:"pointer",color:(0,E.c)("primary"),textDecoration:"underline"},modal:{display:"flex",flexDirection:"column",position:"relative",textAlign:"start",borderRadius:4,boxShadow:"0 1px 4px rgba(36, 44, 58, 0.3)"},close:{appearance:"none",borderRadius:"1em",outline:0,padding:0,position:"absolute",right:"-1em",top:"-1em",width:"2em",height:"2em",background:(0,E.c)("background"),border:"2px solid ".concat((0,E.c)("border")),boxShadow:"0 1.5px 3px rgba(0, 0, 0, .16)",color:"white",fontSize:"1em",fontWeight:"bold",textAlign:"center"},contentLight:{backgroundColor:(0,E.c)("content"),color:(0,E.c)("text")},contentDark:{backgroundColor:(0,E.c)("content"),color:(0,E.c)("text"),border:"1px solid ".concat((0,E.c)("border"))}});(0,lt.Z)((e=>(0,at.Z)({container:{padding:"20px"},title:{padding:"10px",boxShadow:"0 1px 0 rgba(36, 44, 58, 0.1)"},fieldContainer:{padding:"10px"},button:{padding:"5px"},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:"100%"}})))((0,M.ZP)(Mt));var It=n(20806);function Ft(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Bt(e,t){return(Bt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Wt(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?At(e):t}function At(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Zt(e){return(Zt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ut(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Ht=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Bt(e,t)}(c,e);var t,n,i,a,l=(i=c,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Zt(i);if(a){var n=Zt(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Wt(this,e)});function c(...e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),Ut(At(t=l.call(this,...e)),"state",{focused:!0}),Ut(At(t),"_handleFocus",(()=>t.setState({focused:!0}))),Ut(At(t),"_handleBlur",(()=>t.setState({focused:!1}))),Ut(At(t),"_input",o.createRef()),t}return t=c,(n=[{key:"focus",value:function(){var e,t;null===(e=this._input.current)||void 0===e||null===(t=e.focus)||void 0===t||t.call(e)}},{key:"render",value:function(){return o.createElement("div",{className:(0,r.css)(Vt.container)},o.createElement("input",{ref:this._input,autoFocus:this.props.autoFocus,className:(0,r.css)(Vt.input,this.props.error?Vt.error:Vt.normal),value:this.props.value,name:this.props.name,type:this.props.type,disabled:this.props.disabled,onChange:this.props.onChange,placeholder:this.props.placeholder,onFocus:this._handleFocus,onBlur:this._handleBlur}),this.state.focused&&this.props.error?o.createElement("div",{className:(0,r.css)(Vt.validation)},this.props.error.message):null)}}])&&Ft(t.prototype,n),c}(o.Component),Vt=r.StyleSheet.create({container:{position:"relative"},input:{outline:0,fontSize:16,borderRadius:3,padding:"12px 14px 12px 14px",lineHeight:"22px",width:"100%",borderWidth:1,borderStyle:"solid",backgroundColor:(0,E.c)("content")},normal:{borderColor:(0,E.c)("border"),":focus":{borderColor:(0,E.c)("selected")}},error:{borderColor:(0,E.c)("error")},validation:{position:"absolute",backgroundColor:(0,E.c)("error"),color:(0,E.c)("error-text"),padding:"6px 12px",borderRadius:3,marginTop:8,textAlign:"left",zIndex:1,":before":{content:'""',display:"block",position:"absolute",bottom:"100%",width:0,height:0,borderLeft:"6px solid transparent",borderRight:"6px solid transparent",borderBottom:"6px solid ".concat((0,E.c)("error"))}}});var Kt=n(8514);function Yt(){return(Yt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}const Jt=function(e){let t=Yt({},e);return o.createElement(Kt.Z,Yt({className:(0,r.css)(Xt.input)},t))},Xt=r.StyleSheet.create({input:{outline:0,fontSize:16,borderRadius:3,padding:"12px 14px 12px 14px",lineHeight:"22px",border:"1px solid ".concat((0,E.c)("border")),backgroundColor:(0,E.c)("content"),width:"100%",":focus":{borderColor:(0,E.c)("selected")}}});var Gt,$t,qt=n(73935);function Qt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function en(e,t){return(en=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function tn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?nn(e):t}function nn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rn(e){return(rn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function on(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function an(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}const ln=ke.ZP.div(Gt||(Gt=an(["\n    -webkit-font-smoothing: antialiased;\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    color: #fff;\n    z-index: 999;\n    transition-property: opacity;\n    transition-duration: 200ms;\n    background-color: ",";\n    opacity: ",";\n    pointer-events: ",";\n"])),(e=>e.initial?"rgba(24, 29, 37, 0.8)":"inherit"),(e=>e.visible?"1":"0"),(e=>e.visible?"auto":"none")),cn=ke.ZP.div($t||($t=an(["\n    width: 100%;\n    height: 100%;\n    display: -ms-flexbox;\n    display: -webkit-box;\n    display: -webkit-flex;\n    display: flex;\n    -webkit-align-items: center;\n    -webkit-box-align: center;\n    -ms-flex-align: center;\n    align-items: center;\n    -webkit-box-pack: center;\n    -ms-flex-pack: center;\n    -webkit-justify-content: center;\n    justify-content: center;\n    \n"]))),sn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&en(e,t)}(c,e);var t,n,r,i,a,l=(i=c,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=rn(i);if(a){var n=rn(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return tn(this,e)});function c(...e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),on(nn(t=l.call(this,...e)),"state",{rendered:t.props.visible,initial:!t.props.visible}),on(nn(t),"_container",document.createElement("div")),on(nn(t),"_content",o.createRef()),on(nn(t),"_timer",void 0),on(nn(t),"_handleDismiss",(e=>{var n,r;t._content.current&&t._content.current!==e.target&&t._content.current.contains(e.target)||null===(n=(r=t.props).onDismiss)||void 0===n||n.call(r)})),on(nn(t),"_handleKeyDown",(e=>{var n,r;27===e.keyCode&&t.props.visible&&(e.preventDefault(),null===(n=(r=t.props).onDismiss)||void 0===n||n.call(r))})),t}return t=c,r=[{key:"getDerivedStateFromProps",value:function(e){return e.visible?{rendered:!0,initial:!1}:null}}],(n=[{key:"componentDidMount",value:function(){document.body.appendChild(this._container),document.addEventListener("keydown",this._handleKeyDown)}},{key:"componentDidUpdate",value:function(e){this.props.visible!==e.visible&&(clearTimeout(this._timer),this.props.visible||(this._timer=setTimeout((()=>this.setState({rendered:!1})),300)))}},{key:"componentWillUnmount",value:function(){document.body.removeChild(this._container),document.removeEventListener("keydown",this._handleKeyDown)}},{key:"render",value:function(){return qt.createPortal(o.createElement(ln,{initial:this.state.initial,visible:this.props.visible,onClick:this._handleDismiss},o.createElement(cn,{ref:this._content},this.state.rendered?this.props.children:null)),this._container)}}])&&Qt(t.prototype,n),r&&Qt(t,r),c}(o.PureComponent);var un,pn;function dn(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}const fn=(0,ke.ZP)(E.f)(un||(un=dn(["\n    display: -ms-flexbox;\n    display: -webkit-box;\n    display: -webkit-flex;\n    display: flex;\n    -webkit-flex-direction: column;\n    -ms-flex-direction: column;\n    flex-direction: column;\n    position: relative;\n    text-align: center;\n    -webkit-border-radius: 4px;\n    -khtml-border-radius: 4px;\n    -moz-border-radius: 4px;\n    -o-border-radius: 4px;\n    border-radius: 4px;\n    -webkit-box-shadow: ",";\n    -moz-box-shadow: ",";\n    -o-box-shadow: ",";\n    box-shadow: ",";\n    background-color: ",";\n    color: ",";\n"])),(e=>(0,E.s)("popover")),(e=>(0,E.s)("popover")),(e=>(0,E.s)("popover")),(e=>(0,E.s)("popover")),(e=>(0,E.c)("content")),(e=>(0,E.c)("text"))),hn=ke.ZP.button(pn||(pn=dn(["\n    -webkit-appearance: none;\n    -moz-appearance: none;\n    appearance: none;\n    -webkit-border-radius: 1em;\n    -khtml-border-radius: 1em;\n    -moz-border-radius: 1em;\n    -o-border-radius: 1em;\n    border-radius: 1em;\n    outline: 0;\n    padding: 0;\n    position: absolute;\n    right: -1em;\n    top: -1em;\n    width: 2em;\n    height: 2em;\n    background: ",";\n    border: ",";\n    -webkit-box-shadow: 0 1.5px 3px rgba(0, 0, 0, .16);\n    -moz-box-shadow: 0 1.5px 3px rgba(0, 0, 0, .16);\n    -o-box-shadow: 0 1.5px 3px rgba(0, 0, 0, .16);\n    box-shadow: 0 1.5px 3px rgba(0, 0, 0, .16);\n    color: ",";\n    font-size: 1em;\n    font-weight: bold;\n    text-align: center;\n"])),(e=>(0,E.c)("text")),(e=>"2px solid "+(0,E.c)("content")),(e=>(0,E.c)("content")));var mn,bn,yn;function gn(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}const vn=(0,ke.ZP)((({visible:e,className:t,onDismiss:n,children:r})=>o.createElement(sn,{visible:e,onDismiss:n},o.createElement(fn,{className:t},n?o.createElement(hn,{onClick:n,"data-test-id":"modal-close"},"✕"):null,r))))(mn||(mn=gn(["\n    min-width: 360px;\n    min-height: 0;\n    max-width: 420px;\n    max-height: calc(100% - 100px);\n    \n"]))),wn=ke.ZP.div(bn||(bn=gn(["\n    height: 72px;\n    font-size: 24px;\n    width: 100%;\n    line-height: 24px;\n    display: -ms-flexbox;\n    display: -webkit-box;\n    display: -webkit-flex;\n    display: flex;\n    -webkit-flex-shrink: 0;\n    -ms-flex-negative: 0;\n    flex-shrink: 0;\n    -webkit-align-items: center;\n    -webkit-box-align: center;\n    -ms-flex-align: center;\n    align-items: center;\n    -webkit-box-pack: center;\n    -ms-flex-pack: center;\n    -webkit-justify-content: center;\n    justify-content: center;\n    border-bottom: ",";\n"])),(e=>"1px solid "+(0,E.c)("border"))),xn=ke.ZP.div(yn||(yn=gn(["\n    padding: ",";\n    overflow: auto;\n"])),(e=>e.title?"16px 24px 24px 24px":"24px")),En=({visible:e,className:t,onDismiss:n,title:r,autoSize:i,children:a})=>o.createElement(vn,{autoSize:i,className:t,visible:e,onDismiss:n},r?o.createElement(wn,{title:r},r):null,o.createElement(xn,{title:r},a));function _n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function On(e,t){return(On=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Cn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?Pn(e):t}function Pn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Sn(e){return(Sn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const jn=ft(It.z),Rn=Et(Ht);let Ln=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&On(e,t)}(s,e);var t,n,i,a,l,c=(a=s,l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Sn(a);if(l){var n=Sn(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Cn(this,e)});function s(...e){var t,n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),kn(Pn(o=c.call(this,...e)),"state",{name:o.props.name||"",description:null!==(t=o.props.description)&&void 0!==t?t:"",mainIttf:null!==(n=o.props.mainIttf)&&void 0!==n?n:"",wizziSchema:null!==(r=o.props.wizziSchema)&&void 0!==r?r:"",visible:o.props.visible}),kn(Pn(o),"_handleSubmit",(()=>o.props.onSubmit({name:o.state.name,description:o.state.description,mainIttf:o.state.mainIttf,wizziSchema:o.state.wizziSchema}))),kn(Pn(o),"_validateName",(e=>e?/^[a-z_\-\.\/\d\s]+$/i.test(e)?null:new Error("Name can only contain letters, numbers, space, hyphen (-) and underscore (_)."):new Error("Name cannot be empty."))),kn(Pn(o),"handleChange",(e=>o.setState({[e.target.name]:e.target.value}))),o}return t=s,i=[{key:"getDerivedStateFromProps",value:function(e,t){var n,r,o;return t.visible!==e.visible?e.visible?{name:e.name||"",description:null!==(n=e.description)&&void 0!==n?n:"",mainIttf:null!==(r=e.mainIttf)&&void 0!==r?r:"",wizziSchema:null!==(o=e.wizziSchema)&&void 0!==o?o:"",visible:e.visible}:{visible:e.visible}:null}}],(n=[{key:"render",value:function(){const{visible:e,title:t,onDismiss:n,isWorking:i,action:a}=this.props;return o.createElement(En,{visible:e,title:t,onDismiss:n},o.createElement(it,{onSubmit:this._handleSubmit},o.createElement("h4",{className:(0,r.css)(Dn.subtitle)},"Project name"),o.createElement(Rn,{name:"name",autoFocus:!0,value:this.state.name,onChange:this.handleChange,placeholder:"Unnamed Packi",validate:this._validateName}),o.createElement("h4",{className:(0,r.css)(Dn.subtitle)},"Description"),o.createElement(Jt,{name:"description",value:this.state.description,onChange:this.handleChange,minRows:4}),o.createElement("h4",{className:(0,r.css)(Dn.subtitle)},"Main ittf"),o.createElement(Ht,{name:"mainIttf",value:this.state.mainIttf,onChange:this.handleChange}),o.createElement("h4",{className:(0,r.css)(Dn.subtitle)},"Wizzi schema"),o.createElement(Ht,{name:"wizziSchema",value:this.state.wizziSchema,onChange:this.handleChange}),o.createElement("div",{className:(0,r.css)(Dn.buttons)},o.createElement(jn,{type:"submit",large:!0,variant:"primary",loading:i},a))))}}])&&_n(t.prototype,n),i&&_n(t,i),s}(o.Component);const Dn=r.StyleSheet.create({subtitle:{fontSize:16,fontWeight:500,padding:0,lineHeight:"22px",margin:"16px 0 6px 0"},buttons:{margin:"20px 0 0 0"},caption:{marginTop:24,fontSize:"16px",lineHeight:"22px",textAlign:"center"},link:{cursor:"pointer",color:(0,E.c)("primary"),textDecoration:"underline"}}),Nn=function(e){const[t]=(0,M.Gn)(),{name:n,description:i,mainIttf:a,wizziSchema:l,packiProduction:c,readOnly:s,createdAt:u,saveStatus:p,isDownloading:d,isEditModalVisible:f,onSubmitMetadata:h,onShowEditModal:m,onDismissEditModal:b,onDownloadCode:y,onPublishAsync:g,splitViewKind:v,onChangeSplitViewKind:w,loggedUser:x,isWizziJobWaiting:E,generatedPreviewURL:_,onExecuteWizziJob:O}=e,{theme:C}=t,P="publishing"===p;return console.log("EditorToolbar.props",e,a,l,"/index.js"),o.createElement("div",{className:(0,r.css)(Tn.ve_top_bar)},o.createElement("div",{className:(0,r.css)(Tn.ve_top_bar_logo)},o.createElement("a",{href:"/"},o.createElement(ve,{theme:C,width:"150",height:"50"}))),o.createElement("div",{className:(0,r.css)(Tn.ve_top_bar_control)},o.createElement("div",{className:(0,r.css)(Tn.ve_top_bar_label)},c," Production"),o.createElement("div",{className:(0,r.css)(Tn.ve_top_bar_field)},o.createElement("div",{className:(0,r.css)(Tn.ve_top_bar_field_editor)},n+(s?" (generated, readonly)":"")),o.createElement("div",{className:(0,r.css)(Tn.ve_top_bar_field_button)},o.createElement(B,{responsive:!0,title:"Edit production metadata",onClick:m},o.createElement(Ee,{theme:C,width:"20",height:"20"}))))),o.createElement("div",{className:(0,r.css)(Tn.ve_top_bar_icons)},"artifact"==c&&o.createElement(B,{responsive:!0,title:"Browse generated",onClick:()=>window.open(_)},o.createElement(Ce,null)),"package"==c&&o.createElement(B,{responsive:!0,title:"Generate package",onClick:O},o.createElement("svg",{width:"20px",height:"18px",viewBox:"0 0 20 18",fill:"none"},o.createElement("path",{d:"M13.333 15l5-5-5-5M6.667 5l-5 5 5 5",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}))),o.createElement(B,{responsive:!0,title:"Download as zip",onClick:y,disabled:d||P},o.createElement("svg",{width:"20",height:"20"},o.createElement("path",{d:"M14.167 10H5.833L10 16.667 14.167 10z"}),o.createElement("path",{d:"M2.5 18.333h15M10 10V1.667",strokeWidth:"2",strokeLinecap:"round"}))),o.createElement(Xe,{loggedUser:x})),o.createElement(Ln,{title:"Edit Production Details",action:"Done",visible:f,onDismiss:b,onSubmit:e=>{h(e),b()},description:i,name:n,mainIttf:a,wizziSchema:l}))},Tn=r.StyleSheet.create({ve_top_bar:{display:"grid",gridTemplateColumns:"1fr 5fr 1fr",marginBottom:"20px",height:"50px"},ve_top_bar_logo:{paddingTop:"4px",cursor:"pointer"},ve_top_bar_control:{display:"grid",gridTemplateRows:"0.1fr 1fr",borderBottom:"1px solid gray"},ve_top_bar_label:{paddingTop:"2px",paddingLeft:"10px",fontSize:"12px",fontWeight:"900"},ve_top_bar_field:{display:"grid",gridTemplateColumns:"5fr 1fr"},ve_top_bar_field_editor:{paddingLeft:"10px",fontSize:"24px"},ve_top_bar_field_button:{},ve_top_bar_icons:{paddingTop:"4px",display:"flex",flexDirection:"row",alignItems:"center",justifyItems:"center"}});var Mn=n(35937),zn=n.n(Mn);const In=JSON.parse('{"Gr":["babel","flowtype","react","react-native","react-hooks"]}');var Fn=n(11801),Bn=n(36893);function Wn(){return(Wn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function An(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Zn(e,t){return(Zn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Un(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?Hn(e):t}function Hn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Vn(e){return(Vn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Kn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Yn="__toast_group__container";let Jn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Zn(e,t)}(c,e);var t,n,i,a,l=(i=c,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Vn(i);if(a){var n=Vn(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Un(this,e)});function c(...e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),Kn(Hn(t=l.call(this,...e)),"state",{dismissing:!1}),Kn(Hn(t),"_container",document.createElement("div")),Kn(Hn(t),"_timer",void 0),Kn(Hn(t),"_scheduleDismiss",(()=>t._timer=setTimeout(t._handleDismiss,t.props.timeout))),Kn(Hn(t),"_cancelDismiss",(()=>{t.setState({dismissing:!1}),clearTimeout(t._timer)})),Kn(Hn(t),"_handleDismiss",(()=>{t.setState({dismissing:!0}),t._timer=setTimeout((()=>{var e,n;return null===(e=(n=t.props).onDismiss)||void 0===e?void 0:e.call(n)}),400)})),t}return t=c,(n=[{key:"componentDidMount",value:function(){let e=document.getElementById(Yn);e||(e=document.createElement("div"),e.id=Yn,Object.assign(e.style,{position:"fixed",bottom:"3em",left:"1em",zIndex:"999"}),document.body.appendChild(e)),e.appendChild(this._container),this.props.persistent&&this._scheduleDismiss()}},{key:"componentWillUnmount",value:function(){const e=document.getElementById(Yn);e&&e.removeChild(this._container),this._cancelDismiss()}},{key:"render",value:function(){const e=this.props.persistent?{}:{onMouseEnter:this._cancelDismiss,onMouseLeave:this._scheduleDismiss};return qt.createPortal(o.createElement(E.f,Wn({},e,{style:Gn.toast,className:(0,r.css)(this.state.dismissing?Gn.dismissing:Gn.appearing)}),o.createElement("div",{className:(0,r.css)(Gn.label)},this.props.label),this.props.actions.map((e=>{var t;return o.createElement("button",{key:e.label,className:(0,r.css)(Gn.button),onClick:null!==(t=e.action)&&void 0!==t?t:this._handleDismiss},e.label)}))),this._container)}}])&&An(t.prototype,n),c}(o.Component);Kn(Jn,"defaultProps",{timeout:5e3});const Xn=Jn,Gn=r.StyleSheet.create({toast:{display:"flex",margin:"1em",padding:"0 .75em",borderRadius:3,border:"1px solid ".concat((0,E.c)("border")),boxShadow:(0,E.s)("popover"),minWidth:"27em",whiteSpace:"nowrap",backgroundColor:(0,E.c)("content"),color:(0,E.c)("text")},appearing:{animationName:{from:{opacity:0},to:{opacity:1}},animationDuration:"250ms",opacity:1},dismissing:{animationName:{from:{opacity:1},to:{opacity:0}},animationDuration:"400ms",opacity:0},label:{flex:1,minWidth:0,overflow:"hidden",textOverflow:"ellipsis",padding:".75em"},button:{appearance:"none",background:"transparent",color:(0,E.c)("primary"),border:"0",textTransform:"uppercase",fontSize:".9em",fontWeight:"bold",padding:"1em",outline:0,":hover":{backgroundColor:(0,E.c)("hover")},":active":{backgroundColor:(0,E.c)("hover")}}});var $n=n(63150),qn=n.n($n);const Qn=["entry","rest","onExpand","onRename","theme"];function er(){return(er=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function tr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nr(e,t){return(nr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function rr(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?or(e):t}function or(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ir(e){return(ir=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ar(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let lr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nr(e,t)}(l,e);var t,n,r,i,a=(r=l,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ir(r);if(i){var n=ir(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return rr(this,e)});function l(...e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),ar(or(t=a.call(this,...e)),"_getParentPath",(e=>e.includes("/")?e.replace(/\/[^/]+$/,""):null)),ar(or(t),"_isDirectChild",(e=>{if(t.props.entry&&t.props.entry.item.path===e)return!0;const n=t._getParentPath(e);return t.props.entry&&n?t.props.entry.item.path===n:null==t.props.entry&&null==n})),ar(or(t),"_handleDragLeave",(e=>{e.currentTarget.style.backgroundColor=null,clearTimeout(t._dragTimer),t._dragTimer=null})),ar(or(t),"_handleDragOver",(e=>{const n=mr;!(0,Fn.ge)(e,"application/json")||t.props.entry&&"folder"!==t.props.entry.item.type||!n||"file"!==n.item.type&&"folder"!==n.item.type||(e.stopPropagation(),t._isDirectChild(n.item.path)||(e.preventDefault(),e.currentTarget.style.backgroundColor="dark"===t.props.theme?"rgba(255, 255, 255, .1)":"rgba(0, 0, 0, .1)",t._dragTimer||(t._dragTimer=setTimeout((()=>{t.props.entry&&!t.props.entry.state.isExpanded&&t.props.onExpand&&t.props.onExpand(t.props.entry.item.path)}),500))))})),ar(or(t),"_dragTimer",void 0),ar(or(t),"_handleDrop",(e=>{if(e.currentTarget.style.backgroundColor=null,(0,Fn.ge)(e,"application/json")&&(!t.props.entry||"folder"===t.props.entry.item.type)){e.preventDefault(),e.stopPropagation();try{const n=e.dataTransfer.getData("application/json"),r=JSON.parse(n);if("file"!==r.item.type&&"folder"!==r.item.type||t._isDirectChild(r.item.path))return;const o=r.item.path.split("/").pop();t.props.onRename(r.item.path,(0,Fn.UV)(t.props.rest.map((e=>e.item.path)),t.props.entry?t.props.entry.item.path+"/"+o:o))}catch(e){}}})),ar(or(t),"_container",o.createRef()),t}return t=l,(n=[{key:"componentDidMount",value:function(){const e=this._container.current;e&&(e.addEventListener("dragover",this._handleDragOver),e.addEventListener("dragleave",this._handleDragLeave),e.addEventListener("dragend",this._handleDragLeave),e.addEventListener("drop",this._handleDrop))}},{key:"componentWillUnmount",value:function(){const e=this._container.current;e&&(e.removeEventListener("dragover",this._handleDragOver),e.removeEventListener("dragleave",this._handleDragLeave),e.removeEventListener("dragend",this._handleDragLeave),e.removeEventListener("drop",this._handleDrop))}},{key:"render",value:function(){const e=this.props,{entry:t,rest:n,onExpand:r,onRename:i,theme:a}=e,l=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,Qn);return o.createElement("div",er({},l,{ref:this._container}))}}])&&tr(t.prototype,n),l}(o.PureComponent);const cr=(0,M.ZP)(lr);function sr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ur(e,t){return(ur=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function pr(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?dr(e):t}function dr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fr(e){return(fr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function hr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let mr,br=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ur(e,t)}(c,e);var t,n,i,a,l=(i=c,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=fr(i);if(a){var n=fr(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return pr(this,e)});function c(...e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),hr(dr(t=l.call(this,...e)),"state",{menu:null,isHovered:!1}),hr(dr(t),"_handleClick",(e=>{"INPUT"!==e.target.tagName&&t.props.onOpen(t.props.entry.item.path)})),hr(dr(t),"_handleMouseEnter",(()=>t.setState({isHovered:!0}))),hr(dr(t),"_handleMouseLeave",(()=>t.setState({isHovered:!1}))),hr(dr(t),"_handleMouseDown",(()=>t._click=!0)),hr(dr(t),"_handleFocus",(()=>{t._click?t._click=!1:t.props.onFocus(t.props.entry.item.path)})),hr(dr(t),"_handleKeyDown",(e=>{if("INPUT"===e.target.tagName)return;const n=t.props.actions.filter((t=>!(null==t||!t.combo)&&b(e,t.combo)));n.length&&(e.preventDefault(),n.forEach((e=>{var t;return null==e||null===(t=e.handler)||void 0===t?void 0:t.call(e)})))})),hr(dr(t),"_hideContextMenu",(()=>t.setState({menu:null}))),hr(dr(t),"_showContextMenu",(e=>t.setState({menu:{pageX:e.pageX,pageY:e.pageY}}))),hr(dr(t),"_handleDocumentClick",(e=>{t.state.menu?t._menu.current&&e.target!==t._menu.current&&!t._menu.current.contains(e.target)&&t._hideContextMenu():t._more.current&&(e.target===t._more.current||t._more.current.contains(e.target))&&(t.state.menu?t._hideContextMenu():t._showContextMenu(e))})),hr(dr(t),"_handleDocumentContextMenu",(e=>{var n,r;e.target===t._item.current||null!==(n=t._item.current)&&void 0!==n&&null!==(r=n.contains)&&void 0!==r&&r.call(n,e.target)?(e.preventDefault(),t._showContextMenu(e)):t.state.menu&&t._hideContextMenu()})),hr(dr(t),"_handleDragStart",(e=>{e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("application/json",JSON.stringify(t.props.entry)),mr=t.props.entry})),hr(dr(t),"_handleDragEnd",(()=>mr=null)),hr(dr(t),"_click",!1),hr(dr(t),"_item",o.createRef()),hr(dr(t),"_more",o.createRef()),hr(dr(t),"_menu",o.createRef()),t}return t=c,(n=[{key:"componentDidMount",value:function(){document.addEventListener("click",this._handleDocumentClick),document.addEventListener("contextmenu",this._handleDocumentContextMenu)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this._handleDocumentClick),document.removeEventListener("contextmenu",this._handleDocumentContextMenu)}},{key:"render",value:function(){var e,t;const{entry:n,rest:i,draggable:a,readOnly:l,onRename:c,onExpand:s,theme:u,actions:p}=this.props,{menu:d,isHovered:f}=this.state;return o.createElement(cr,{entry:n,rest:i,onRename:c,onExpand:s},o.createElement("div",{ref:this._item,draggable:a,onDragStart:this._handleDragStart,onDragEnd:this._handleDragEnd,tabIndex:0,className:(0,r.css)(yr.entry),onClick:this._handleClick,onMouseEnter:this._handleMouseEnter,onMouseLeave:this._handleMouseLeave,onMouseDown:this._handleMouseDown,onFocus:this._handleFocus,onKeyDown:this._handleKeyDown},this.props.renderItem()),o.createElement("div",{className:(0,r.css)(yr.highlight,"dark"===u?yr.highlightDark:yr.highlightLight,n.state.isSelected?yr.highlightActive:null)}),!l&&o.createElement(We,{ref:this._menu,visible:Boolean(d),position:d,actions:p,onHide:this._hideContextMenu}),o.createElement("button",{ref:this._more,tabIndex:-1,className:(0,r.css)(yr.more,f||d?yr.moreVisible:yr.moreInvisible)},this.props.renderMenuIcon()),null===(e=(t=this.props).renderTree)||void 0===e?void 0:e.call(t))}}])&&sr(t.prototype,n),c}(o.Component);hr(br,"defaultProps",{draggable:!0});const yr=r.StyleSheet.create({entry:{position:"relative",display:"inline-block",outline:0,padding:"1px 16px",width:"100%",cursor:"pointer",zIndex:1,whiteSpace:"nowrap"},highlight:{content:'""',display:"inline-block",height:30,position:"absolute",left:0,right:0,opacity:0,zIndex:1,pointerEvents:"none"},highlightLight:{backgroundColor:"rgba(0, 0, 0, .04)"},highlightDark:{backgroundColor:"rgba(255, 255, 255, .04)"},highlightActive:{opacity:1},more:{position:"absolute",left:-8,border:0,outline:0,background:"none",height:30,zIndex:2,padding:"7px 12px",textAlign:"right",":hover":{opacity:1}},moreInvisible:{opacity:0},moreVisible:{opacity:1},icon:{fill:"currentColor",height:16,width:16}});function gr({entry:e}){let t;return e.state.isLoading?o.createElement("div",{className:(0,r.css)(vr.spinner)}):(t=(0,Fn.A7)(e.item.path)?o.createElement("g",null,o.createElement("path",{d:"M7.46487122,14 C7.80521143,13.4116533 8,12.7285743 8,12 C8,9.790861 6.209139,8 4,8 C3.65470043,8 3.31961992,8.043753 3,8.12601749 L3,2 L13,2 L13,14 L7.46487122,14 Z M9,2 L13,6 L13,2 L9,2 Z M9,6 L9,2 L8,2 L8,7 L13,7 L13,6 L9,6 Z"}),o.createElement("circle",{cx:"4",cy:"12",r:"3"})):(0,Fn.S7)(e.item.path)?o.createElement("path",{d:"M2,5.09257608 L7.47329684,8.31213064 L7.47329684,14.7092088 L2,11.5325867 L2,5.09257608 Z M2.49245524,4.22207437 L7.97432798,1 L13.506361,4.2238509 L7.92838937,7.41965108 L2.49245524,4.22207437 Z M14,5.09352708 L14,11.5325867 L8.47329684,14.7128733 L8.47329684,8.25995389 L14,5.09352708 Z"}):"folder"===e.item.type?e.state.isExpanded?o.createElement("g",null,o.createElement("path",{d:"M7.5,5 L2,5 L2,13 L7.75,13 L14,13 L14,4 L15,4 L15,14 L1,14 L1,4 L6.5,4 L5.5,5 L7.5,5 L7.5,4.5 L7.5,5 Z M14,4 L14,3 L7.5,3 L7.5,3.5 L7.5,3 L7,3.5 L7,2 L15,2 L15,4 L14,4 Z M6.5,4 L5,4 L7,2 L7,3.5 L6.5,4 Z"}),o.createElement("polygon",{points:"0 7 13 7 14 14 1 14"})):o.createElement("path",{d:"M7.25,4 L7.5,4 L7.5,3 L7,3.5 L7,2 L15,2 L15,4 L7.25,4 Z M6.75,4 L5,4 L7,2 L7,3.5 L6.5,4 L6.75,4 Z M1,4 L15,4 L15,14 L1,14 L1,4 Z M7.5,3 L7.5,4 L14,4 L14,3 L7.5,3 Z"}):(0,Fn.Or)(e.item.path)?o.createElement("g",null,o.createElement("circle",{cx:"5",cy:"5",r:"1"}),o.createElement("polygon",{points:"5.71428571 8.41176471 8 11.2352941 10.8571429 7 14 13 2 13"}),o.createElement("path",{d:"M3,3 L3,13 L13,13 L13,3 L3,3 Z M3,2 L13,2 C13.5522847,2 14,2.44771525 14,3 L14,13 C14,13.5522847 13.5522847,14 13,14 L3,14 C2.44771525,14 2,13.5522847 2,13 L2,3 C2,2.44771525 2.44771525,2 3,2 Z"})):o.createElement("path",{d:"M3,2 L13,2 L13,14 L3,14 L3,2 Z M9,2 L13,6 L13,2 L9,2 Z M9,6 L9,2 L8,2 L8,7 L13,7 L13,6 L9,6 Z"}),o.createElement("svg",{className:(0,r.css)(vr.icon,(0,Fn.Y8)(e.item.path)?vr.test:void 0,e.state.isError?vr.error:void 0),viewBox:"0 0 16 16"},t))}const vr=r.StyleSheet.create({icon:{height:16,width:16,fill:"currentColor",verticalAlign:"middle",opacity:.7},error:{fill:(0,E.c)("error")},test:{color:(0,E.c)("soft")},spinner:{display:"inline-block",verticalAlign:"middle",borderStyle:"solid",borderTopColor:"currentColor",borderLeftColor:"currentColor",borderBottomColor:"currentColor",borderRightColor:"rgba(0, 0, 0, .16)",borderWidth:1,height:12,width:12,borderRadius:"50%",margin:"2px 2px",animationDuration:"1s",animationName:[{from:{transform:"rotate(0deg)"},to:{transform:"rotate(360deg)"}}],animationIterationCount:"infinite",animationTimingFunction:"linear"}});function wr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xr(e,t){return(xr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Er(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_r(e):t}function _r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Or(e){return(Or=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Cr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Pr=e=>e.replace(/(\.[^.]+$)/,((e,t)=>".js"===t?".tsx":".js")),Sr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xr(e,t)}(c,e);var t,n,i,a,l=(i=c,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Or(i);if(a){var n=Or(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Er(this,e)});function c(e){var t,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),Cr(_r(n=l.call(this,e)),"state",void 0),Cr(_r(n),"_handleToggleExpand",(()=>n.props.onExpand(n.props.entry.item.path,!n.props.entry.state.isExpanded))),Cr(_r(n),"_handleToggleRename",(()=>{n.state.isRenaming&&!n.state.error&&n._handleNameChange(n.state.name),n.setState(((e,t)=>{var n;return e.isRenaming?{isRenaming:!1,name:"",error:null}:{isRenaming:!0,name:null!==(n=t.entry.item.path.split("/").pop())&&void 0!==n?n:"",error:null}}))})),Cr(_r(n),"_handleDelete",(()=>n.props.onDelete(n.props.entry.item.path))),Cr(_r(n),"_handleNameChange",(e=>{const{entry:t}=n.props;if(e&&(e!==t.item.path.split("/").pop()||t.state.isCreating)){const r=t.item.path.replace(/[^/]+$/,e);n.props.onRename(t.item.path,r)}})),Cr(_r(n),"_handleInputChange",(e=>{const t=e.target.value;n.setState({name:t,error:n._validateName(t)})})),Cr(_r(n),"_validateName",(e=>{if(e===n.props.entry.item.path.split("/").pop())return null;const t=["\0","\\",":","*","?",'"',"<",">","|"].filter((t=>e.includes(t)));return t.length?new Error("".concat(1===t.length?"".concat(t[0]," is"):"".concat(t.join(", ")," are"),"\n                 not allowed")):n.props.getAdjacentEntries().some((t=>{var n;return(null!==(n=t.item.path.split("/").pop())&&void 0!==n?n:"").toLowerCase()===e.toLowerCase()}))?new Error("Another entry already exists with same name"):(0,Fn.A7)(e)?new Error("Cannot name a new file as ".concat(e)):null})),Cr(_r(n),"_handleInputFocus",(e=>{const t=e.target;t instanceof HTMLInputElement&&t.select()})),Cr(_r(n),"_handleInputBlur",(()=>{n.state.error||n._handleNameChange(n.state.name),n.setState({isRenaming:!1,name:"",error:null})})),Cr(_r(n),"_handleInputKeyUp",(e=>{switch(e.keyCode){case m.Enter:n._handleToggleRename();break;case m.Escape:n._handleInputBlur()}})),Cr(_r(n),"_handleCreateFile",(()=>n.props.onCreateFile(n.props.entry.item.path))),Cr(_r(n),"_handleCreateFolder",(()=>n.props.onCreateFolder(n.props.entry.item.path))),Cr(_r(n),"_handleCopy",(()=>n.props.onCopy(n.props.entry.item.path))),Cr(_r(n),"_handlePaste",(()=>{const{entry:e,clipboard:t,onPaste:r,onClearClipboard:o}=n.props;t.forEach((t=>r(e.item.path,t))),o()})),Cr(_r(n),"_handleDuplicate",(()=>{const{entry:e,onPaste:t}=n.props;t(e.item.path.includes("/")?"folder"===e.item.type?(0,Fn.Il)(e.item.path):e.item.path:void 0,e)})),Cr(_r(n),"_handleToggleTSExt",(()=>{const e=n.props.entry.item.path;n.props.onRename(e,Pr(e))})),Cr(_r(n),"_getActions",(()=>[{label:"New file",handler:n._handleCreateFile},{label:"New folder",handler:n._handleCreateFolder},"folder"===n.props.entry.item.type?{label:"folder"===n.props.entry.item.type&&n.props.entry.state.isExpanded?"Collapse":"Expand",handler:n._handleToggleExpand,combo:[m.Enter]}:void 0,n.props.clipboard.length?{label:"Paste",handler:n._handlePaste,combo:[m.Meta,m.V]}:n.props.entry.item.virtual?void 0:{label:"Copy",handler:n._handleCopy,combo:[m.Meta,m.C]},n.props.entry.item.virtual?void 0:{label:"Duplicate",handler:n._handleDuplicate,combo:[m.Meta,m.D]},(0,Fn.A7)(n.props.entry.item.path)?{label:"Rename to ".concat(Pr(n.props.entry.item.path)),handler:n._handleToggleTSExt}:void 0,...(0,Fn.A7)(n.props.entry.item.path)||n.props.entry.item.virtual?[]:[{label:"Rename",handler:n._handleToggleRename,combo:[m.F2]},{label:"Delete",handler:n._handleDelete,combo:[m.Delete]}]])),Cr(_r(n),"_renderItem",(()=>{const{entry:e}=n.props,{isRenaming:t,name:i}=n.state,a=t?" ":e.item.path.split("/").pop();return o.createElement("div",null,n.state.error?o.createElement("div",{className:(0,r.css)(kr.error)},n.state.error.message):null,o.createElement(gr,{entry:e}),o.createElement("span",{className:(0,r.css)(kr.label,(0,Fn.Y8)(e.item.path)?kr.labelTest:void 0,e.state.isError?kr.labelError:void 0)},a),t?o.createElement("input",{autoFocus:!0,type:"text",value:i,onChange:n._handleInputChange,onFocus:n._handleInputFocus,onBlur:n._handleInputBlur,onKeyUp:n._handleInputKeyUp,className:(0,r.css)(kr.input)}):null)})),Cr(_r(n),"_renderTree",(()=>{const{entry:e,rest:t,clipboard:i,readOnly:a,onCreateFile:l,onCreateFolder:c,onOpen:s,onSelect:u,onFocus:p,onPaste:d,onRename:f,onExpand:h,onDelete:m,onCopy:b,onClearClipboard:y,theme:g}=n.props;return"folder"===e.item.type&&t.length&&e.state.isExpanded?o.createElement("div",{className:(0,r.css)(kr.child)},o.createElement(Tr,{parent:e.item.path,entries:t,clipboard:i,readOnly:a,onCreateFile:l,onCreateFolder:c,onOpen:s,onSelect:u,onFocus:p,onCopy:b,onPaste:d,onRename:f,onExpand:h,onDelete:m,onClearClipboard:y,theme:g})):null})),Cr(_r(n),"_renderMenuIcon",(()=>o.createElement("svg",{className:(0,r.css)(kr.icon),viewBox:"0 0 16 16"},o.createElement("circle",{cy:"3",cx:"8",r:"1.5"}),o.createElement("circle",{cy:"8",cx:"8",r:"1.5"}),o.createElement("circle",{cy:"13",cx:"8",r:"1.5"}))));const{entry:i}=e;return n.state={name:i.state.isCreating&&null!==(t=i.item.path.split("/").pop())&&void 0!==t?t:"",error:null,isRenaming:!i.item.asset&&!!i.state.isCreating},n}return t=c,(n=[{key:"componentDidMount",value:function(){this.props.entry.state.isCreating&&this.props.onOpen(this.props.entry.item.path)}},{key:"render",value:function(){var e;const{entry:t,rest:n,onOpen:r,onFocus:i,onRename:a,onExpand:l,readOnly:c,theme:s}=this.props,u=!(null!==(e=(0,Fn.A7)(this.props.entry.item.path)||this.props.entry.item.virtual)&&void 0!==e?e:this.props.entry.state.isCreating);return o.createElement(br,{entry:t,rest:n,onOpen:r,onFocus:i,onRename:a,onExpand:l,renderItem:this._renderItem,renderTree:this._renderTree,renderMenuIcon:this._renderMenuIcon,actions:this._getActions(),draggable:u,readOnly:c,theme:s})}}])&&wr(t.prototype,n),c}(o.Component),kr=r.StyleSheet.create({child:{marginLeft:16},label:{verticalAlign:-1,margin:"0 6px",userSelect:"none"},labelError:{color:(0,E.c)("error")},labelTest:{color:(0,E.c)("soft")},input:{position:"absolute",top:0,left:35,height:28,margin:1,border:"1px solid ".concat((0,E.c)("selected")),borderRadius:3,backgroundColor:(0,E.c)("content"),outline:0,paddingLeft:2},error:{backgroundColor:(0,E.c)("error"),color:(0,E.c)("error-text"),padding:"4px 8px",position:"fixed",marginTop:-32,marginLeft:20,borderRadius:3},icon:{height:16,width:16,opacity:.7,fill:"currentColor"}});function jr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Rr(e,t){return(Rr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Lr(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?Dr(e):t}function Dr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Nr(e){return(Nr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}let Tr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Rr(e,t)}(c,e);var t,n,i,a,l=(i=c,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Nr(i);if(a){var n=Nr(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Lr(this,e)});function c(...e){var t,n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),o=()=>t.props.entries.filter((e=>!e.item.path.replace(new RegExp("^".concat(qn()(t.props.parent),"/")),"").includes("/"))),(r="_getImmediateChildren")in(n=Dr(t=l.call(this,...e)))?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,t}return t=c,(n=[{key:"render",value:function(){const{entries:e,readOnly:t,clipboard:n,onCreateFile:i,onCreateFolder:a,onFocus:l,onOpen:c,onSelect:s,onPaste:u,onRename:p,onExpand:d,onDelete:f,onCopy:h,onClearClipboard:m,className:b,theme:y}=this.props;return o.createElement("div",{className:"".concat((0,r.css)(Mr.container)," ").concat(null!=b?b:"")},this._getImmediateChildren().sort(((e,t)=>e.item.type===t.item.type?e.item.path.startsWith(".")&&!t.item.path.startsWith(".")?1:t.item.path.startsWith(".")&&!e.item.path.startsWith(".")?-1:e.item.path.localeCompare(t.item.path):"folder"===e.item.type?-1:1)).map((r=>o.createElement(Sr,{key:r.item.path,entry:r,rest:e.filter((e=>(0,Fn.lu)(e.item.path,r.item.path))),readOnly:t,clipboard:n,onCreateFile:i,onCreateFolder:a,onOpen:c,onSelect:s,onFocus:l,onCopy:h,onPaste:u,onDelete:f,onRename:p,onExpand:d,onClearClipboard:m,getAdjacentEntries:this._getImmediateChildren,theme:y}))))}}])&&jr(t.prototype,n),c}(o.PureComponent);const Mr=r.StyleSheet.create({container:{display:"inline-block",width:"100%"}});function zr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ir(e,t){return(Ir=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Fr(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?Br(e):t}function Br(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Wr(e){return(Wr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ar(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let Zr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ir(e,t)}(c,e);var t,n,i,a,l=(i=c,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Wr(i);if(a){var n=Wr(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Fr(this,e)});function c(...e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),Ar(Br(t=l.call(this,...e)),"state",{isHovered:!1,menu:null}),Ar(Br(t),"_hideContextMenu",(()=>t.setState({menu:null}))),Ar(Br(t),"_showContextMenu",(e=>t.setState({menu:{pageX:e.pageX,pageY:e.pageY}}))),Ar(Br(t),"_handleDocumentClick",(e=>{t.state.menu&&t._menu.current&&e.target!==t._menu.current&&!t._menu.current.contains(e.target)&&t._hideContextMenu()})),Ar(Br(t),"_handleDocumentContextMenu",(e=>{var n,r;e.target===t._item.current||null!==(n=t._item.current)&&void 0!==n&&null!==(r=n.contains)&&void 0!==r&&r.call(n,e.target)?(e.preventDefault(),t._showContextMenu(e)):t.state.menu&&t._hideContextMenu()})),Ar(Br(t),"_handleMouseEnter",(()=>t.setState({isHovered:!0}))),Ar(Br(t),"_handleMouseLeave",(()=>t.setState({isHovered:!1}))),Ar(Br(t),"_menu",o.createRef()),Ar(Br(t),"_item",o.createRef()),t}return t=c,(n=[{key:"componentDidMount",value:function(){document.addEventListener("click",this._handleDocumentClick),document.addEventListener("contextmenu",this._handleDocumentContextMenu)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this._handleDocumentClick),document.removeEventListener("contextmenu",this._handleDocumentContextMenu)}},{key:"render",value:function(){const{entry:e,theme:t}=this.props,n=e.item.path.split("/").pop();return o.createElement("li",{ref:this._item,tabIndex:-1,className:(0,r.css)(Hr.item,e.state.isFocused&&("dark"===t?Hr.focusedDark:Hr.focusedLight)),onMouseEnter:this._handleMouseEnter,onMouseLeave:this._handleMouseLeave},o.createElement("button",{onClick:this.props.onClose,className:(0,r.css)(Hr.close,this.state.isHovered?Hr.closeFocused:Hr.closeBlurred)},"×"),o.createElement("div",{onClick:this.props.onOpen},o.createElement(gr,{entry:e}),o.createElement("span",{className:(0,r.css)(Hr.label,e.state.isError?Hr.labelError:void 0)},n)),o.createElement(We,{ref:this._menu,visible:Boolean(this.state.menu),position:this.state.menu,actions:[{label:"Close",handler:this.props.onClose},{label:"Close Others",handler:this.props.onCloseOthers},{label:"Close All",handler:this.props.onCloseAll}],onHide:this._hideContextMenu}))}}])&&zr(t.prototype,n),c}(o.PureComponent);const Ur=(0,M.ZP)(Zr),Hr=r.StyleSheet.create({item:{paddingLeft:24,cursor:"pointer",outline:0,whiteSpace:"nowrap"},label:{display:"inline-block",verticalAlign:-1,margin:6,userSelect:"none",whiteSpace:"nowrap"},labelError:{color:(0,E.c)("error")},focusedLight:{backgroundColor:"rgba(0, 0, 0, .04)"},focusedDark:{backgroundColor:"rgba(255, 255, 255, .04)"},close:{padding:"7px 8px",fontSize:"18px",border:"none",appearance:"none",position:"absolute",left:0,margin:"-3px 0 0 0",background:"none",outline:0},closeFocused:{opacity:1},closeBlurred:{opacity:0}});function Vr({title:e,expanded:t,buttons:n,children:i,onClick:a,className:l}){return o.createElement("div",{className:"".concat(null!=l?l:""," ").concat((0,r.css)(Kr.container))},o.createElement("div",{className:(0,r.css)(Kr.header)},o.createElement("div",{className:(0,r.css)(Kr.left),onClick:a,"data-test-id":"file-list-pane-".concat(e.toLowerCase().replace(/[^a-z]/g,"-"))},o.createElement("svg",{className:(0,r.css)(Kr.collapse,t?Kr.collapseExpanded:Kr.collapseCollapsed),width:"12px",height:"12px",viewBox:"0 0 12 12"},o.createElement("g",{stroke:"none",strokeWidth:"2",fill:"none",fillRule:"evenodd",strokeLinecap:"round",strokeLinejoin:"round"},o.createElement("polyline",{stroke:"currentColor",transform:"translate(6.000000, 6.000000) scale(-1, 1) rotate(180.000000) translate(-6.000000, -6.000000) ",points:"2 4 6 8 10 4"}))),o.createElement("h4",{className:(0,r.css)(Kr.label)},e)),o.createElement("div",{className:(0,r.css)(Kr.right)},n)),t?i:null)}const Kr=r.StyleSheet.create({container:{display:"flex",flexDirection:"column"},header:{display:"flex",flexDirection:"row",alignItems:"center",padding:"0 4px"},label:{fontSize:"1em",fontWeight:500,lineHeight:1,margin:0},collapse:{margin:"1px 6px 1px 2px",opacity:.7},collapseCollapsed:{transform:"rotate(180deg)"},collapseExpanded:{transform:"rotate(0deg)"},left:{flex:1,display:"flex",flexDirection:"row",padding:"2px 4px",cursor:"pointer"},right:{display:"flex",flexDirection:"row",alignItems:"center"}}),Yr=["innerRef"];function Jr(){return(Jr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Xr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Gr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $r(e,t){return($r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function qr(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Qr(e){return(Qr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}let eo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$r(e,t)}(c,e);var t,n,i,a,l=(i=c,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Qr(i);if(a){var n=Qr(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return qr(this,e)});function c(){return Xr(this,c),l.apply(this,arguments)}return t=c,(n=[{key:"render",value:function(){const e=this.props,{innerRef:t}=e,n=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,Yr);return o.createElement("button",Jr({},n,{className:(0,r.css)(no.button),ref:t}),o.createElement("svg",{className:(0,r.css)(no.icon),viewBox:"0 0 16 16"},this.props.children))}}])&&Gr(t.prototype,n),c}(o.PureComponent);const to=o.forwardRef(((e,t)=>o.createElement(eo,Jr({},e,{innerRef:t})))),no=r.StyleSheet.create({button:{appearance:"none",background:"transparent",border:0,margin:0,outline:0},icon:{fill:"currentColor",height:16,width:16,verticalAlign:-3}});function ro(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function oo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ro(Object(n),!0).forEach((function(t){io(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ro(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function io(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ao(e,t){return oo(oo({},e),{},{item:t.item?oo(oo({},e.item),t.item):e.item,state:t.state?oo(oo({},e.state),t.state):e.state})}function lo(e){if("file"===e.item.type){if(e.state.isSelected||e.state.isFocused||e.state.isOpen)return ao(e,{state:{isOpen:!1,isSelected:!1,isFocused:!1}})}else if(e.state.isSelected)return ao(e,{state:{isSelected:!1}});return e}function co(e,t,n,r){const o=t?e.find((e=>e.item.path===t)):null,i=o?"folder"===o.item.type?o.item.path:(0,Fn.Il)(o.item.path):null,a=n.item.path.split("/").pop(),l=ao(n,{item:{path:(0,Fn.UV)(e.map((e=>e.item.path)),i?"".concat(i,"/").concat(a):a,r)}});return l.state={isCreating:!0},l}function so(e,t,n){const r="file"===t?{item:{path:"Untitled file.js",type:"file",content:""},state:{isCreating:!0}}:{item:{path:"Untitled folder",type:"folder"},state:{isCreating:!0}};let o=n;if("string"!=typeof o){const t=e.find((e=>!0===e.state.isSelected));o=t?t.item.path:void 0}const i=co(e,o,r);return[...e.map((e=>"folder"===e.item.type&&(0,Fn.lu)(i.item.path,e.item.path)&&!e.state.isExpanded?ao(e,{state:{isExpanded:!0}}):e)),i]}function uo(e,t,n=!1){const r=e.find((e=>e.item.path===t)),o=!!r&&"folder"===r.item.type;return e.map((e=>{if(e.item.path===t)return"file"===e.item.type?e.state.isSelected&&e.state.isFocused&&e.state.isOpen?e:ao(e,{state:{isSelected:!0,isFocused:!0,isOpen:!0}}):ao(e,{state:{isSelected:!0,isExpanded:n?e.state.isExpanded:!e.state.isExpanded}});if("file"===e.item.type){if(e.state.isSelected||e.state.isFocused)return ao(e,{state:{isSelected:!1,isFocused:!!o&&e.state.isFocused}})}else if(e.state.isSelected)return ao(e,{state:{isSelected:!1}});return e}))}function po(e,t,n){const r=[];let o=(0,Fn.Il)(t);for(;o;){const t=e.find((e=>e.item.path===o));if(t){if("folder"!==t.item.type)throw new Error("File path must be inside a folder");break}r.push({item:{type:"folder",path:o},state:{isExpanded:!!n}}),o=(0,Fn.Il)(o)}return r}function fo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ho(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fo(Object(n),!0).forEach((function(t){mo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function mo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const bo=e=>{const t=e.split("/");if(0===t.length)return[];const n=[];for(let e=0;e<t.length-1;e++)n.push(t.slice(0,e+1).join("/"));return n};function yo(e,t,n,r){const o=!!n.find((({location:t,severity:n})=>(null==t?void 0:t.fileName)===e&&n<0)),i=!o&&!!n.find((({location:t,severity:n})=>(null==t?void 0:t.fileName)===e&&n>=3));if("ASSET"===t.type)return r&&"file"===r.item.type&&r.item.asset?r.item.uri===t.contents&&r.state.isError===i&&r.state.isLoading===o?r:{item:ho(ho({},r.item),{},{uri:t.contents}),state:ho(ho({},r.state),{},{isError:i,isLoading:o})}:{item:{path:e,type:"file",uri:t.contents,asset:!0},state:{isError:i,isLoading:o}};{const n=(0,Fn.A7)(e);return r&&"file"===r.item.type&&!r.item.asset?r.item.content===t.contents&&r.state.isError===i&&r.state.isLoading===o?r:{item:ho(ho({},r.item),{},{content:t.contents}),state:ho(ho({},r.state),{},{isError:i,isLoading:o})}:{item:{path:e,type:"file",content:t.contents,virtual:"package.json"===e},state:{isOpen:n,isSelected:n,isFocused:n,isError:i,isLoading:o}}}}function go(e){return e.find((e=>"file"===e.item.type&&e.state.isFocused))}function vo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vo(Object(n),!0).forEach((function(t){Po(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function xo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Eo(e,t){return(Eo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _o(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?Oo(e):t}function Oo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Co(e){return(Co=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Po(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const So=()=>o.createElement("g",{transform:"translate(7.000000, 7.000000)"},o.createElement("circle",{fill:(0,E.c)("success"),cx:"4.5",cy:"4.5",r:"4.5"}),o.createElement("rect",{fill:(0,E.c)("success-text"),x:"4",y:"2",width:"1",height:"5"}),o.createElement("rect",{fill:(0,E.c)("success-text"),x:"2",y:"4",width:"5",height:"1"}));let ko=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Eo(e,t)}(s,e);var t,n,i,a,l,c=(a=s,l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Co(a);if(l){var n=Co(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return _o(this,e)});function s(...e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),Po(Oo(t=c.call(this,...e)),"state",{clipboard:[],deleted:[],openFilesPane:!0,projectPane:!0,entries:[],selectedFile:""}),Po(Oo(t),"_handleEntrySelect",(e=>t.updateEntries(function(e,t){return e.map((e=>e.item.path===t?ao(e,{state:{isSelected:!e.state.isSelected}}):e))}(t.state.entries,e)))),Po(Oo(t),"_handleEntryOpen",(e=>t.updateEntries(uo(t.state.entries,e)))),Po(Oo(t),"_handleEntryFocus",(e=>t.updateEntries(uo(t.state.entries,e,!0)))),Po(Oo(t),"_handleEntryExpand",((e,n)=>t.updateEntries(function(e,t,n=!0){return e.map((e=>e.item.path===t&&"folder"===e.item.type?ao(e,{state:{isExpanded:n}}):e))}(t.state.entries,e,n)))),Po(Oo(t),"_handleEntryRename",((e,n)=>{if(e===n)return;const r=t.state.entries.find((t=>t.item.path===e));r&&("folder"===r.item.type?t.state.entries.filter((t=>"file"===t.item.type&&t.item.path.startsWith(e))).forEach((r=>t.props.onRenameFile(r.item.path,"".concat(n).concat(r.item.path.substring(e.length))))):t.props.onRenameFile(e,n)),t.updateEntries(function(e,t,n){const r=e.find((e=>e.item.path===t));if(!r)return e;const o=ao(r,{item:{path:n}});delete o.state.isCreating;const i=e.map((e=>e.item.path===r.item.path?o:"folder"===o.item.type&&(0,Fn.lu)(e.item.path,r.item.path)?ao(e,{item:{path:(0,Fn.tv)(e.item.path,r.item.path,o.item.path)}}):e)),a=po(i,o.item.path,!0);return[...i,...a]}(t.state.entries,e,n))})),Po(Oo(t),"_restoreEntries",(e=>t.updateEntries([...t.state.entries,...e.map((e=>ao(e,{item:{path:(0,Fn.UV)(t.state.entries.map((e=>e.item.path)),e.item.path)}})))]))),Po(Oo(t),"_handleDismissDelete",(e=>t.setState((t=>({deleted:t.deleted.filter((t=>t.id!==e))}))))),Po(Oo(t),"_handleEntryClose",(e=>t.updateEntries(t.state.entries.map((t=>t.item.path===e?lo(t):t))))),Po(Oo(t),"_handleEntryCloseOthers",(e=>t.updateEntries(t.state.entries.map((t=>t.item.path!==e?lo(t):t))))),Po(Oo(t),"_handleEntryCloseAll",(()=>t.updateEntries(t.state.entries.map((e=>lo(e)))))),Po(Oo(t),"_handleEntryDelete",(e=>{const n=t.state.entries.find((t=>t.item.path===e)),r=[];t.updateEntries(t.state.entries.filter((n=>{const o=n.item.path===e||(0,Fn.lu)(n.item.path,e);return o&&(r.push(n),"file"===n.item.type&&t.props.onRemoveFile(n.item.path)),!o}))),t.setState((e=>({deleted:[...e.deleted,{id:t._currentDeleteID++,path:n?n.item.path:"Item",entries:r}]})))})),Po(Oo(t),"_currentDeleteID",0),Po(Oo(t),"_handleEntryImport",(e=>{let n;if((0,Fn.S7)(e.item.path))n=t.state.entries.map((t=>{if((0,Fn.S7)(t.item.path))try{const n=JSON.parse(t.item.content),r=JSON.parse(e.item.content);return wo(wo({},t),{},{item:wo(wo({},t.item),{},{content:JSON.stringify(wo(wo({},n),{},{dependencies:wo(wo({},n.dependencies),Object.keys(r.dependencies).reduce(((e,t)=>e),{}))}),null,2)})})}catch(e){}return t}));else if((0,Fn.Dc)(e.item.path))try{const r=JSON.parse(e.item.content);r.plugins&&(r.plugins=r.plugins.filter((e=>In.Gr.includes(e))),r.plugins.length||delete r.plugins),r.rules&&(r.rules=zn()(r.rules,((e,t)=>t.includes("/")?In.Gr.some((e=>t.startsWith("".concat(e,"/")))):t))),r.extends&&("string"!=typeof r.extends||r.extends.startsWith("eslint:")?(r.extends=r.extends.filter((e=>e.startsWith("eslint:"))),r.extends.length||delete r.extends):delete r.extends),n=t.state.entries.filter((e=>!(0,Fn.Dc)(e.item.path))),n.push(ao(e,{item:{content:JSON.stringify(r,null,2)}}))}catch(e){n=t.state.entries}else{const r=po(t.state.entries,e.item.path);n=[...t.state.entries,...r],n.push(ao(e,{item:{path:(0,Fn.UV)(n.map((e=>e.item.path)),e.item.path)}}))}t.updateEntries(n)})),Po(Oo(t),"_handleEntryPaste",((e,n)=>t.updateEntries(function(e,t,n){const r=co(e,t,n,"- Copy");if("folder"===n.item.type){const t=e.filter((e=>(0,Fn.lu)(e.item.path,n.item.path))).map((e=>ao(e,{item:{path:(0,Fn.tv)(e.item.path,n.item.path,r.item.path)}})));return[...e,...t,r]}return[...e,r]}(t.state.entries,e,n)))),Po(Oo(t),"_handleCopy",(e=>t.setState((t=>({clipboard:t.entries.filter((t=>t.item.path===e))}))))),Po(Oo(t),"_handleClearClipboard",(()=>t.setState({clipboard:[]}))),Po(Oo(t),"_toggleOpenFilesPane",(()=>t.setState((e=>({openFilesPane:!e.openFilesPane}))))),Po(Oo(t),"_toggleProjectPane",(()=>t.setState((e=>({projectPane:!e.projectPane}))))),Po(Oo(t),"_handleCreateFile",(e=>{let n=so(t.state.entries,"file",e);const r=n.find((e=>!t.state.entries.find((t=>t.item.path===e.item.path))));n=r?uo(n,r.item.path,!0):n,t.updateEntries(n)})),Po(Oo(t),"_handleCreateFolder",(e=>t.updateEntries(so(t.state.entries,"folder",e)))),t}return t=s,i=[{key:"getDerivedStateFromProps",value:function(e,t){let n=function(e,t,n){const r=[],o=new Set;for(const a of Object.keys(e).sort()){for(const e of bo(a)){var i;o.has(e)||(r.push(null!==(i=n.find((t=>t.item.path===e)))&&void 0!==i?i:{item:{path:e,type:"folder"},state:{}}),o.add(e))}const l=e[a],c=n.find((e=>e.item.path===a));r.push(yo(a,l,t,c))}return n.forEach((e=>{"folder"!==e.item.type||o.has(e.item.path)||r.push(e)})),r}(e.files,e.annotations,t.entries);return n=t.selectedFile!==e.selectedFile?uo(n,e.selectedFile):n,{entries:n,selectedFile:e.selectedFile}}}],(n=[{key:"updateEntries",value:function(e){var t,n;const r=this.state.entries;this.setState({entries:e}),this.props.updateFiles((t=>{const n={};for(const r in t)e.find((e=>e.item.path===r))||(n[r]=null);return e.forEach((e=>{"file"!==e.item.type||t[e.item.path]||(0,Fn.S7)(e.item.path)||(n[e.item.path]={type:e.item.asset?"ASSET":"CODE",contents:e.item.asset?e.item.uri:e.item.content})})),n}));const o=go(r),i=go(e);var a,l;(null==i||null===(t=i.item)||void 0===t?void 0:t.path)!==(null==o||null===(n=o.item)||void 0===n?void 0:n.path)&&this.props.onSelectFile(null!==(a=null==i||null===(l=i.item)||void 0===l?void 0:l.path)&&void 0!==a?a:"")}},{key:"render",value:function(){return o.createElement("div",{className:(0,r.css)(Ro.container)},this.props.visible?o.createElement(Bn.Q,{className:(0,r.css)(Ro.pane)},o.createElement(Vr,{className:(0,r.css)(this.state.projectPane?Ro.openFilesSmall:Ro.openFilesLarge),title:"Open files",expanded:this.state.openFilesPane,onClick:this._toggleOpenFilesPane},o.createElement("ul",{className:(0,r.css)(Ro.tabs),"data-test-id":"file-list-open-files-content"},this.state.entries.filter((e=>"file"===e.item.type&&e.state.isOpen)).map((e=>o.createElement(Ur,{key:e.item.path,entry:e,onOpen:()=>this._handleEntryOpen(e.item.path),onClose:()=>this._handleEntryClose(e.item.path),onCloseOthers:()=>this._handleEntryCloseOthers(e.item.path),onCloseAll:this._handleEntryCloseAll}))))),o.createElement(Vr,{className:(0,r.css)(Ro.project),title:"Project"+(this.props.readOnly?" (readonly)":""),expanded:this.state.projectPane,onClick:this._toggleProjectPane,buttons:this.props.readOnly?[]:[o.createElement(to,{key:"create-file",onClick:()=>this._handleCreateFile()},o.createElement("path",{fillOpacity:"0.7",d:"M3,2 L13,2 L13,14 L3,14 L3,2 Z M9,2 L13,6 L13,2 L9,2 Z M9,6 L9,2 L8,2 L8,7 L13,7 L13,6 L9,6 Z"}),o.createElement(So,null)),o.createElement(to,{key:"create-folder",onClick:()=>this._handleCreateFolder()},o.createElement("path",{fillOpacity:"0.7",d:"M7.25,4 L7.5,4 L7.5,3 L7,3.5 L7,2 L15,2 L15,4 L7.25,4 Z M6.75,4 L5,4 L7,2 L7,3.5 L6.5,4 L6.75,4 Z M1,4 L15,4 L15,14 L1,14 L1,4 Z M7.5,3 L7.5,4 L14,4 L14,3 L7.5,3 Z"}),o.createElement(So,null))]},o.createElement(cr,{className:(0,r.css)(Ro.files),rest:this.state.entries,onRename:this._handleEntryRename},o.createElement("div",{className:(0,r.css)(Ro.children),"data-test-id":"file-list-project-content"},o.createElement(Tr,{parent:"",entries:this.state.entries,readOnly:this.props.readOnly,clipboard:this.state.clipboard,onCreateFile:this._handleCreateFile,onCreateFolder:this._handleCreateFolder,onOpen:this._handleEntryOpen,onSelect:this._handleEntrySelect,onFocus:this._handleEntryFocus,onPaste:this._handleEntryPaste,onRename:this._handleEntryRename,onExpand:this._handleEntryExpand,onDelete:this._handleEntryDelete,onCopy:this._handleCopy,onClearClipboard:this._handleClearClipboard,theme:this.props.theme,className:(0,r.css)(Ro.list)})))),this.state.deleted.map((e=>o.createElement(Xn,{key:e.id,label:"Deleted ".concat(e.path.split("/").pop()),actions:[{label:"Undo",action:()=>{this._restoreEntries(e.entries),this._handleDismissDelete(e.id)}},{label:"Dismiss"}],onDismiss:()=>this._handleDismissDelete(e.id)}))).reverse()):null)}}])&&xo(t.prototype,n),i&&xo(t,i),s}(o.PureComponent);(0,M.ZP)(ko);const jo=(0,M.ZP)(ko),Ro=r.StyleSheet.create({container:{display:"flex",flexDirection:"column",height:"100%"},list:{padding:"0 12px",height:"100%"},pane:{flex:1,display:"flex",flexDirection:"column",width:240,minWidth:240,height:"100%",zIndex:10},project:{flex:1},openFilesSmall:{maxHeight:"50%"},openFilesLarge:{maxHeight:"calc(100% - 30px)"},files:{flex:"1 0 0",overflow:"auto",paddingBottom:16},children:{position:"relative"},tabs:{margin:0,listStyle:"none",padding:"2px 0",overflow:"auto",":empty":{display:"none"}},toolbar:{padding:8},toasts:{position:"fixed",bottom:"3em",left:"1em",zIndex:10}});function Lo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Do(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function No(e,t){return(No=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function To(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Mo(e){return(Mo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}let zo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&No(e,t)}(c,e);var t,n,i,a,l=(i=c,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Mo(i);if(a){var n=Mo(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return To(this,e)});function c(){return Lo(this,c),l.apply(this,arguments)}return t=c,(n=[{key:"render",value:function(){return o.createElement("div",{className:(0,r.css)(Io.container)},o.createElement("h4",{className:(0,r.css)(Io.text)},"Select a file to view and edit"))}}])&&Do(t.prototype,n),c}(o.PureComponent);const Io=r.StyleSheet.create({container:{flex:1,display:"flex",alignItems:"center",justifyContent:"center"},text:{fontSize:"1.5em",fontWeight:500,opacity:.5}});var Fo=n(70405);function Bo(e){const{title:t,meta:n}=function(e){const t="".concat(e.name," - Packi"),n=e.description,r="".concat({NODE_ENV:"production",SERVER_URL:"http://localhost:5000",API_SERVER_URL:"http://localhost:5000",PACKI_SEGMENT_KEY:"",PACKI_AMPLITUDE_KEY:"",PACKI_WEBPLAYER_URL:"",DEPLOY_ENVIRONMENT:"staging",BUILD_TIMESTAMP:1662116533139}.PACKI_SERVER_URL).concat(e.id?"/".concat(e.id):"","\n    "),o="https://s3.amazonaws.com/exp-brand-assets/PackiIcon_200.png";return{title:t,description:n,url:r,meta:[{name:"description",content:n},{property:"og:url",content:r},{property:"og:title",content:t},{property:"og:description",content:n},{property:"og:type",content:"website"},{property:"og:image",content:o},{property:"og:image:width",content:"200"},{property:"og:image:height",content:"200"},{name:"twitter:card",content:"summary"},{name:"twitter:site",content:"@expo"},{name:"twitter:title",content:t},{name:"twitter:description",content:n},{name:"twitter:image",content:o}]}}(e);return o.createElement(Fo.q,{title:t,meta:n})}var Wo,Ao,Zo=n(53842),Uo=n(44243),Ho=n(76527);function Vo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ko(e,t){return(Ko=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Yo(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?Jo(e):t}function Jo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Xo(e){return(Xo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Go(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $o(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}const qo=ke.ZP.div(Wo||(Wo=$o(["\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    padding: 0 10px;\n    z-index: 999;\n    text-align: center;\n    pointer-events: none;\n    \n"]))),Qo=ke.ZP.div(Ao||(Ao=$o(["\n    display: inline-block;\n    margin: auto;\n    padding: 1em;\n    max-width: 100%;\n    background-color: ",";\n    color: ",";\n    -webkit-border-radius: 0 0 4px 4px;\n    -khtml-border-radius: 0 0 4px 4px;\n    -moz-border-radius: 0 0 4px 4px;\n    -o-border-radius: 0 0 4px 4px;\n    border-radius: 0 0 4px 4px;\n    transition-duration: 200ms;\n    pointer-events: ",";\n    -webkit-box-shadow: ",";\n    -moz-box-shadow: ",";\n    -o-box-shadow: ",";\n    box-shadow: ",";\n    -webkit-transform: ",";\n    -ms-transition: ",";\n    transform: ",";\n"])),(e=>"success"===e.type?(0,E.c)("success"):"error"===e.type?(0,E.c)("error"):(0,E.c)("primary")),(e=>"success"===e.type?(0,E.c)("success-text"):"error"===e.type?(0,E.c)("error-text"):(0,E.c)("primary-text")),(e=>e.visible?"auto":"none"),(e=>(0,E.s)("popover")),(e=>(0,E.s)("popover")),(e=>(0,E.s)("popover")),(e=>(0,E.s)("popover")),(e=>e.visible?"translateY(0)":"translateY(-100%)"),(e=>e.visible?"translateY(0)":"translateY(-100%)"),(e=>e.visible?"translateY(0)":"translateY(-100%)")),ei=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ko(e,t)}(c,e);var t,n,r,i,a,l=(i=c,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Xo(i);if(a){var n=Xo(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Yo(this,e)});function c(...e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),Go(Jo(t=l.call(this,...e)),"state",{rendered:t.props.visible}),Go(Jo(t),"_timer",void 0),t}return t=c,r=[{key:"getDerivedStateFromProps",value:function(e){return e.visible?{rendered:!0}:null}}],(n=[{key:"componentDidUpdate",value:function(e){this.props.visible!==e.visible&&(clearTimeout(this._timer),this.props.visible||(this._timer=setTimeout((()=>this.setState({rendered:!1})),300)))}},{key:"render",value:function(){return this.state.rendered?o.createElement(qo,null,o.createElement(Qo,{visible:this.props.visible,type:this.props.type,className:this.props.className},this.props.children)):null}}])&&Vo(t.prototype,n),r&&Vo(t,r),c}(o.PureComponent);var ti=n(36636),ni=n(50524),ri=n(6447),oi=n(17812),ii=n(3133),ai=n(93114);const li=["height","width","theme"];function ci(){return(ci=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}const si=e=>{let{height:t="24px",width:n="24px",theme:r="light"}=e,i=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,li);return o.createElement("svg",ci({xmlns:"http://www.w3.org/2000/svg",width:n,height:t,viewBox:"0 0 30 30"},i),o.createElement("path",{d:"M29,15h-5.1c-0.1-1.2-0.5-2.4-1-3.5c1.9-1.5,3.1-3.7,3.1-6.1V5c0-0.6-0.4-1-1-1s-1,0.4-1,1v0.4c0,1.8-0.8,3.4-2.2,4.5c-0.5-0.7-1.2-1.2-1.9-1.7c0-0.1,0-0.1,0-0.2c0-2.2-1.8-4-4-4s-4,1.8-4,4c0,0.1,0,0.1,0,0.2c-0.7,0.5-1.3,1-1.9,1.7C8.8,8.8,8,7.2,8,5.4V5c0-0.6-0.4-1-1-1S6,4.4,6,5v0.4c0,2.4,1.1,4.7,3.1,6.1c-0.5,1-0.9,2.2-1,3.5H3c-0.6,0-1,0.4-1,1s0.4,1,1,1h5.1c0.1,1.2,0.5,2.4,1,3.5C7.1,21.9,6,24.2,6,26.6V27c0,0.6,0.4,1,1,1s1-0.4,1-1v-0.4c0-1.8,0.8-3.4,2.2-4.5c1.5,1.8,3.5,2.9,5.8,2.9s4.4-1.1,5.8-2.9c1.4,1.1,2.2,2.7,2.2,4.5V27c0,0.6,0.4,1,1,1s1-0.4,1-1v-0.4c0-2.4-1.1-4.7-3.1-6.1c0.5-1,0.9-2.2,1-3.5H29c0.6,0,1-0.4,1-1S29.6,15,29,15z"}))};var ui=n(46914),pi=n(99802);function di(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function hi(e,t){return(hi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function mi(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function bi(e){return(bi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const yi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hi(e,t)}(l,e);var t,n,r,i,a=(r=l,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=bi(r);if(i){var n=bi(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return mi(this,e)});function l(){return di(this,l),a.apply(this,arguments)}return t=l,(n=[{key:"componentDidMount",value:function(){const e=document.querySelector(".syntax-highlight-container > pre");console.log("SyntaxHighlighter.el1",e,"/index.js"),e&&e.style&&(e.style.margin=0,e.style.padding=0,e.style.height="100%")}},{key:"render",value:function(){const e=function(e){const t=e.substr(e.lastIndexOf(".")),n=e.substr(0,e.lastIndexOf(".")),r=n.substr(n.lastIndexOf("."));return".ittf"==t?gi[r]||"text":gi[t]||"text"}(this.props.filePath);return o.createElement("div",{className:"syntax-highlight-container"},o.createElement(ui.Z,{language:e,showLineNumbers:this.props.showLineNumbers,style:pi.Z},this.props.code))}}])&&fi(t.prototype,n),l}(o.Component),gi={".js":"javascript",".jsx":"javascript",".ts":"typescript",".tsx":"typescript",".html":"html",".css":"css",".svg":"svg",".json":"json",".xml":"xml"},vi=function({previewURL:e}){return o.createElement("div",{className:(0,r.css)(wi.container)},o.createElement("iframe",{src:e,allow:"geolocation; camera; microphone",className:(0,r.css)(wi.frame)}))},wi=r.StyleSheet.create({container:{position:"relative",display:"flex",flex:1,width:"100%",height:"100%"},frame:{position:"relative",width:"100%",height:"100%",border:0,zIndex:1,backgroundColor:(0,E.c)("content","light")}});function xi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ei(e,t){return(Ei=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _i(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?Oi(e):t}function Oi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ci(e){return(Ci=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let Si=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ei(e,t)}(l,e);var t,n,r,i,a=(r=l,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ci(r);if(i){var n=Ci(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return _i(this,e)});function l(...e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),Pi(Oi(t=a.call(this,...e)),"state",{view:"generated"}),Pi(Oi(t),"_handleGenerated",(()=>t.setState({view:"generated"}))),Pi(Oi(t),"_handleMTree",(()=>{t.props.onMTreePreview(),t.setState({view:"mtreeIttf"})})),Pi(Oi(t),"_handleMTreeDebugInfo",(()=>{t.props.onMTreeDebugInfoPreview(),t.setState({view:"mTreeBuildupScript"})})),Pi(Oi(t),"_handleBrowser",(()=>t.setState({view:"browser"}))),t}return t=l,(n=[{key:"render",value:function(){const{classes:e,splitViewKind:t,selectedFile:n}=this.props,{view:r}=this.state;return o.createElement("div",{className:"right"===t?e.containerFull:e.container},"generated"===r&&this.props.generatedContent&&o.createElement("div",{className:e.editor},o.createElement(yi,{className:e.syntaxHigh,code:this.props.generatedContent,filePath:n.substr(0,n.length-5),lineNumbers:!0})),"generated"===r&&this.props.wizzifiedIttfContent&&o.createElement("div",{className:e.editor},o.createElement(yi,{className:e.syntaxHigh,code:this.props.wizzifiedIttfContent,filePath:n,lineNumbers:!0})),"mtreeIttf"===r&&o.createElement("div",{className:e.editor},o.createElement(yi,{className:e.syntaxHigh,code:this.props.mTreeIttf||"",filePath:"mTree.ittf",lineNumbers:!0})),"mTreeBuildupScript"===r&&o.createElement("div",{className:e.editor},o.createElement(yi,{className:e.syntaxHigh,code:this.props.mTreeBuildupScript||"",filePath:"mTreeBuildupScript.js",lineNumbers:!0})),"browser"===r&&o.createElement("div",{className:e.browserOuter},this.props.generatedSourcePath.endsWith(".html.ittf")||this.props.generatedSourcePath.endsWith(".svg.ittf")?o.createElement(vi,{previewURL:this.props.generatedPreviewURL}):o.createElement("h1",null,"No viewer for document",this.props.generatedSourcePath)),o.createElement("div",{className:e.sidebar},o.createElement("div",{className:e.sbItem},o.createElement(ri.ZP,{title:"View generated content"},o.createElement(oi.Z,{onClick:this._handleGenerated,classes:{root:e.iconButton}},o.createElement(ii.Z,null)))),o.createElement("div",{className:e.sbItem},o.createElement(ri.ZP,{title:"View mTree"},o.createElement(oi.Z,{onClick:this._handleMTree,classes:{root:e.iconButton}},o.createElement(ai.Z,null)))),o.createElement("div",{className:e.sbItem},o.createElement(ri.ZP,{title:"View mTree build script"},o.createElement(oi.Z,{onClick:this._handleMTreeDebugInfo,classes:{root:e.iconButton}},o.createElement(si,null)))),o.createElement("div",{className:e.sbItem},o.createElement(ri.ZP,{title:"Browse artifact"},o.createElement(oi.Z,{onClick:this._handleBrowser,classes:{root:e.iconButton}},o.createElement(Ce,null))))))}}])&&xi(t.prototype,n),l}(o.Component);const ki=(0,lt.Z)((e=>(0,at.Z)({container:{display:"flex",flexDirection:"row",borderLeft:"1px solid #cccccc",width:"44vw",height:"100%"},containerFull:{display:"flex",flexDirection:"row",borderLeft:"1px solid #cccccc",width:"100%",height:"100%"},editor:{width:"90%"},browserOuter:{border:"0.3em solid rgb(122, 102, 82)",borderRadius:"0.5em",width:"90%"},syntaxHigh:{margin:0,padding:0,height:"100%"},sidebar:{display:"flex",flexDirection:"column",justifyContent:"start",width:"10%",background:e.palette.primary.light},sbItem:{display:"flex",justifyContent:"center"},iconButton:{padding:"10px"}})))(Si);function ji(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ri(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Li(e,t){return(Li=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Di(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ni(e){return(Ni=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}let Ti=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Li(e,t)}(l,e);var t,n,r,i,a=(r=l,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ni(r);if(i){var n=Ni(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Di(this,e)});function l(){return ji(this,l),a.apply(this,arguments)}return t=l,(n=[{key:"render",value:function(){const{classes:e,error:t}=this.props,{name:n,message:r,stack:i,errorLines:a}=t;return o.createElement("div",{className:e.container},o.createElement("div",{className:e.errorName},n),o.createElement("div",{className:e.message},r&&r.split(",").map(((e,t)=>o.createElement("div",{key:t},e)))),o.createElement("pre",{className:e.lines},a&&a.join("\n")),o.createElement("ul",null,i&&i.split("\n").map(((e,t)=>o.createElement("li",{key:t},e)))))}}])&&Ri(t.prototype,n),l}(o.Component);const Mi=(0,lt.Z)((e=>(0,at.Z)({container:{display:"flex",flexDirection:"column",borderLeft:"1px solid #cccccc",width:"44vw",height:"100%",overflow:"scroll"},errorName:{padding:"15px 30px",fontSize:"28px"},message:{padding:"15px 30px",fontSize:"20px"},lines:{padding:"15px 30px",fontSize:"18px",fontFamily:"Courier, mono"}})))(Ti);function zi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ii(e,t){return(Ii=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Fi(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?Bi(e):t}function Bi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Wi(e){return(Wi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ai(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let Zi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ii(e,t)}(p,e);var t,i,a,l,c,u=(l=p,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Wi(l);if(c){var n=Wi(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Fi(this,e)});function p(...e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),Ai(Bi(t=u.call(this,...e)),"state",{currentModal:null,currentBanner:null,loadedEditor:null,isMarkdownPreview:!0,shouldPreventRedirectWarning:!1,isDownloading:!1,splitViewKind:"both"}),Ai(Bi(t),"_handleUnload",(e=>{if("edited"!==t.props.saveStatus&&"publishing"!==t.props.saveStatus&&"saving-draft"!==t.props.saveStatus||t.state.shouldPreventRedirectWarning)return void t._allowRedirectWarning();const n="You have unsaved changes. Are you sure you want to leave this page?";return e.returnValue=n,n})),Ai(Bi(t),"_showBanner",((e,n)=>{t.setState({currentBanner:e}),setTimeout((()=>t.setState((t=>t.currentBanner===e?{currentBanner:null}:t))),n)})),Ai(Bi(t),"_handleChangeSplitViewKind",(e=>t.setState({splitViewKind:e.target.value}))),Ai(Bi(t),"_handleDismissEditModal",(()=>t.setState({currentModal:null}))),Ai(Bi(t),"_handleShowTitleDescriptionModal",(()=>t.setState({currentModal:"edit-info"}))),Ai(Bi(t),"_handleShowShortcuts",(()=>t.setState({currentModal:"shortcuts"}))),Ai(Bi(t),"_handleShowModal",(e=>t.setState({currentModal:e}))),Ai(Bi(t),"_handleRemoveFile",(e=>{var n,r;return null===(n=t._EditorComponent)||void 0===n||null===(r=n.removePath)||void 0===r?void 0:r.call(n,e)})),Ai(Bi(t),"_handleRenameFile",((e,n)=>{var r,o;return null===(r=t._EditorComponent)||void 0===r||null===(o=r.renamePath)||void 0===o?void 0:o.call(r,e,n)})),Ai(Bi(t),"_EditorComponent",void 0),Ai(Bi(t),"_showErrorPanel",(()=>t.props.setPreferences({panelType:"errors"}))),Ai(Bi(t),"_togglePanels",(e=>t.props.setPreferences({panelsShown:!t.props.preferences.panelsShown,panelType:e&&!t.props.preferences.panelsShown?e:t.props.preferences.panelType}))),Ai(Bi(t),"_toggleFileTree",(()=>t.props.setPreferences({fileTreeShown:!t.props.preferences.fileTreeShown}))),Ai(Bi(t),"_toggleTheme",(()=>t.props.setPreferences({theme:"light"===t.props.preferences.theme?"dark":"light"}))),Ai(Bi(t),"_toggleMarkdownPreview",(()=>t.setState((e=>({isMarkdownPreview:!e.isMarkdownPreview}))))),Ai(Bi(t),"_preventRedirectWarning",(()=>t.setState({shouldPreventRedirectWarning:!0}))),Ai(Bi(t),"_allowRedirectWarning",(()=>t.setState({shouldPreventRedirectWarning:!1}))),t}return t=p,a=[{key:"getDerivedStateFromProps",value:function(e,t){var n;const{selectedFile:r,files:o}=e;let i=null;return!t.isMarkdownPreview||!r.endsWith(".md")||null!==(n=o[r])&&void 0!==n&&n.contents||(i=i||{},i.isMarkdownPreview=!1),i}}],(i=[{key:"componentDidMount",value:function(){window.addEventListener("beforeunload",this._handleUnload)}},{key:"componentDidUpdate",value:function(e){e.autosaveEnabled===this.props.autosaveEnabled||this.props.autosaveEnabled||this._showBanner("autosave-disabled",5e3)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("beforeunload",this._handleUnload)}},{key:"render",value:function(){const{currentModal:e,currentBanner:t,isDownloading:i}=this.state,{id:a,createdAt:l,saveStatus:c,files:u,selectedFile:p,sendCodeOnChangeEnabled:d,userAgent:f,onPublishAsync:h,preferences:m,owner:b,name:g,description:v,mainIttf:w,wizziSchema:x,packiProduction:E,previewRef:_,previewURL:O,loggedUser:C,onExecuteWizziJob:P,generatedArtifact:S,mTreeBuildupScript:k,mTreeIttf:j,isWizziJobWaiting:R,wizzifiedIttfContent:L,wizziError:T,onMTreePreview:M,onMTreeDebugInfoPreview:z}=this.props,I=this.props.annotations;return"".concat("http://localhost:5000","/~/").concat(encodeURIComponent(b),"/").concat(encodeURIComponent(g)),console.log("EditorView.props",this.props,w,x,"/index.js"),o.createElement(Zo.W,null,this.state.loadedEditor?null:o.createElement(ni.Y,null),o.createElement(Bo,{name:g,description:v,id:a}),o.createElement(y,{bindings:D,onTrigger:e=>{const t={tree:this._toggleFileTree,panels:this._togglePanels,shortcuts:this._handleShowShortcuts}[e];t&&t()}}),o.createElement(Nn,{packiProduction:E,name:g,description:v,wizziSchema:x,mainIttf:w,readOnly:this.props.readOnly,createdAt:l,saveStatus:c,loggedUser:C,isEditModalVisible:"edit-info"===e,isWizziJobWaiting:R,onChangeSplitViewKind:this._handleChangeSplitViewKind,splitViewKind:this.state.splitViewKind,isDownloading:i,generatedPreviewURL:O,onShowEditModal:this._handleShowTitleDescriptionModal,onDismissEditModal:this._handleDismissEditModal,onExecuteWizziJob:P,onSubmitMetadata:this.props.onSubmitMetadata,onDownloadCode:this.props.onDownloadAsync,onPublishAsync:h}),o.createElement("div",{className:(0,r.css)(Vi.editorAreaOuterWrapper)},o.createElement("div",{className:(0,r.css)(Vi.editorAreaOuter)},o.createElement(Ho.A,null,o.createElement(s,{initialPrimarySize:"30%"},o.createElement(jo,{annotations:I,visible:m.fileTreeShown,files:u,selectedFile:p,readOnly:this.props.readOnly,updateFiles:this.props.updateFiles,onSelectFile:this.props.onSelectFile,onRemoveFile:this._handleRemoveFile,onRenameFile:this._handleRenameFile,onDownloadCode:this.props.onDownloadAsync,saveStatus:c}),o.createElement(s,{initialPrimarySize:"60%"},o.createElement(ti.Z,{load:async()=>{let e;const t=Promise.all([n.e(3136),n.e(8384)]).then(n.bind(n,62842)).then((e=>({editor:e,type:"monaco"}))),r=new Promise(((t,r)=>e=setTimeout((()=>{this._showBanner("slow-connection",5e3),n.e(6549).then(n.bind(n,72430)).then(t,r)}),3e3))).then((e=>({editor:e,type:"simple"})));return Promise.race([t.catch((()=>r)),r]).then((({editor:t,type:n})=>(this.setState({loadedEditor:n}),clearTimeout(e),t)))}},(({loaded:e,data:t})=>{this._EditorComponent=t;const i=u[p];if(!i)return o.createElement(zo,null);{const{contents:a}=i,l=p.endsWith(".md");if(l&&this.state.isMarkdownPreview)return o.createElement(o.Fragment,null,o.createElement(ti.Z,{load:()=>Promise.all([n.e(9368),n.e(6579)]).then(n.bind(n,16833))},(({loaded:e,data:t})=>e&&t?o.createElement(t,{source:a}):o.createElement(Uo.y,null))),o.createElement("button",{className:(0,r.css)(Vi.previewToggle),onClick:this._toggleMarkdownPreview},o.createElement("svg",{width:"12px",height:"12px",viewBox:"0 0 18 18",className:(0,r.css)(Vi.previewToggleIcon)},o.createElement("g",{transform:"translate(-147.000000, -99.000000)"},o.createElement("g",{transform:"translate(144.000000, 96.000000)"},o.createElement("path",{d:"M3,17.25 L3,21 L6.75,21 L17.81,9.94 L14.06,6.19 L3,17.25 L3,17.25 Z M20.71,7.04 C21.1,6.65 21.1,6.02 20.71,5.63 L18.37,3.29 C17.98,2.9 17.35,2.9 16.96,3.29 L15.13,5.12 L18.88,8.87 L20.71,7.04 L20.71,7.04 Z"}))))));if(e&&t)return o.createElement("div",{className:(0,r.css)(Vi.editorComponentOuter)},o.createElement(t,{className:(0,r.css)(Vi.editorComponent),selectedFile:p,files:u,autoFocus:!/Untitled file.*\.(js|tsx?)$/.test(p),annotations:I,readOnly:this.props.readOnly,updateFiles:this.props.updateFiles,onSelectFile:this.props.onSelectFile,lineNumbers:"undefined"}),l?o.createElement("button",{className:(0,r.css)(Vi.previewToggle),onClick:this._toggleMarkdownPreview},o.createElement("svg",{width:"16px",height:"12px",viewBox:"0 0 22 16",className:(0,r.css)(Vi.previewToggleIcon)},o.createElement("g",{transform:"translate(-145.000000, -1156.000000)"},o.createElement("g",{transform:"translate(144.000000, 1152.000000)"},o.createElement("path",{d:"M12,4.5 C7,4.5 2.73,7.61 1,12 C2.73,16.39 7,19.5 12,19.5 C17,19.5 21.27,16.39 23,12 C21.27,7.61 17,4.5 12,4.5 L12,4.5 Z M12,17 C9.24,17 7,14.76 7,12 C7,9.24 9.24,7 12,7 C14.76,7 17,9.24 17,12 C17,14.76 14.76,17 12,17 L12,17 Z M12,9 C10.34,9 9,10.34 9,12 C9,13.66 10.34,15 12,15 C13.66,15 15,13.66 15,12 C15,10.34 13.66,9 12,9 L12,9 Z"}))))):null)}return o.createElement(Uo.y,null)})),T?o.createElement(Mi,{error:T}):S&&S.artifactContent||L?o.createElement(ki,{selectedFile:this.props.selectedFile,generatedContent:S?S.artifactContent:void 0,generatedSourcePath:S?S.sourcePath:void 0,mTreeBuildupScript:k,mTreeIttf:j,wizzifiedIttfContent:L,generatedPreviewURL:O,splitViewKind:this.state.splitViewKind,onMTreePreview:M,onMTreeDebugInfoPreview:z}):S&&S.errorLines?o.createElement(Mi,{errorName:S.errorName,errorLines:S.errorLines,errorMessage:S.errorMessage,errorStack:S.errorStack}):null))),m.panelsShown?o.createElement(me,{annotations:I,onShowErrorPanel:this._showErrorPanel,onTogglePanels:this._togglePanels,onSelectFile:this.props.onSelectFile,panelType:m.panelType}):null)),o.createElement(X,{annotations:I,loggedUser:C,fileTreeShown:m.fileTreeShown,panelsShown:m.panelsShown,sendCodeOnChangeEnabled:d,onToggleTheme:this._toggleTheme,onTogglePanels:this._togglePanels,onToggleFileTree:this._toggleFileTree,onShowShortcuts:this._handleShowShortcuts,theme:this.props.preferences.theme,autoGenSingleDoc:m.autoGenSingleDoc,autoExecJob:m.autoExecJob}),o.createElement(En,{visible:"shortcuts"===e,onDismiss:this._handleHideModal},o.createElement(N,null)),o.createElement(ei,{type:"info",visible:"autosave-disabled"===t},"Automatic saving has been disabled in this Packi because you have it open in another tab."),o.createElement(ei,{type:"info",visible:"slow-connection"===t},"Slow network detected. Trying to load a basic version of the editor. Some features such as linting and autocomplete may not work."),o.createElement(ei,{type:"info",visible:"export-unavailable"===t},"You need to save the Packi first to export the code!"))}}])&&zi(t.prototype,i),a&&zi(t,a),p}(o.Component);const Ui=(0,M.dD)(Zi),Hi=Ui,Vi=r.StyleSheet.create({editorAreaOuter:{display:"flex",flex:1,flexDirection:"column",minWidth:0,minHeight:0},editorAreaOuterWrapper:{display:"flex",flex:1,flexDirection:"row",minHeight:0,minWidth:0},embedModal:{minWidth:0,minHeight:0,maxWidth:"calc(100% - 48px)",maxHeight:"calc(100% - 48px)"},preview:{backgroundColor:(0,E.c)("content"),borderLeft:"1px solid ".concat((0,E.c)("border"))},previewToggle:{appearance:"none",position:"absolute",right:0,bottom:0,margin:32,padding:12,height:48,width:48,border:0,borderRadius:"50%",backgroundColor:(0,E.c)("secondary"),color:(0,E.c)("secondary-text"),outline:0,transitionDuration:"170ms",transitionProperty:"box-shadow",transitionTimingFunction:"linear",":focus-visible":{outline:"auto"},":hover":{boxShadow:(0,E.s)("small")}},previewToggleIcon:{fill:"currentColor",verticalAlign:-1},editorComponentOuter:{border:"0.3em solid rgb(122, 102, 82)",borderRadius:"0.5em",height:"100%",width:"100%"},editorComponent:{height:"100%",width:"100%"}})},64091:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r=n.p+"assets/c30688b34674907e653a3ed6c4f4b32e.png"},55959:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r=n.p+"assets/5164d45d60e8aaa815782671bc55c243.png"},50436:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r=n.p+"assets/7ccdedc1554fd42cf97740128c0ab1db.png"},3957:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r=n.p+"assets/883481150a50d23d04b3cb88d03713d4.png"},53117:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r=n.p+"assets/57a5dfd897cd26233394742647bb768e.png"},93361:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r=n.p+"assets/d96019678d8d19c83e5cd22d04b745ad.png"},49558:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r=n.p+"assets/51631d4fcbedcb496eff14fedc2f6139.png"}}]);
//# sourceMappingURL=EditorView.bundle.js.map